<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Actionhero</title><script src="/static/js/googleAnalytics.js"></script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/chunks/main-34725f5a99cb2b2b6f00.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.94d1ccb9dee116719961.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7d0481f4467570ea8ca6.js" as="script"/><link rel="preload" href="/_next/static/chunks/dd05285286c593a0e6da2f584467d9517f5816b2.be19a4f843a12596b98d.js" as="script"/><link rel="preload" href="/_next/static/chunks/27270cb085e17e8e99404fc0284c05b5fb1bb558.1923d1b6e48e3134e628.js" as="script"/><link rel="preload" href="/_next/static/chunks/e75431a1bdcb89b14e100a4a4bb0858c3732af66.b4fa2937edb4092f8c40.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/tutorials/%5Bname%5D-e4f5bf03c6c5960f3180.js" as="script"/></head><body><div id="__next"><div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><header style="background-color:#2F5266"><div class="container"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:0;border:0" class="navbar navbar-expand-lg navbar-light"><span class="navbar-brand"><a style="padding-top:0;margin-bottom:15px"><img src="/static/images/actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px"/></a></span><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="navbar-collapse collapse" id="basic-navbar-nav"><div class="mr-auto navbar-nav"><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/why" data-rb-event-key="/why" class="nav-link">Why Actionhero?</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/downloads" data-rb-event-key="/downloads" class="nav-link">Downloads</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/tutorials" data-rb-event-key="/tutorials" class="nav-link">Tutorials</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="https://docs.actionherojs.com" data-rb-event-key="https://docs.actionherojs.com" class="nav-link">Docs</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="plugins" data-rb-event-key="plugins" class="nav-link">Plugins</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="community" data-rb-event-key="community" class="nav-link">Community</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="https://actionherojs.threadless.com" data-rb-event-key="https://actionherojs.threadless.com" class="nav-link">Shop</a></div><div class="d-none d-xl-block navbar-nav"><div class="d-none d-lg-block"><a style="text-decoration:none" href="/get-started"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;font-weight:300;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Get Started</button></a></div></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px"><div class="container"><div class="row"><div style="text-align:center" class="col-md-3"><img src="/static/images/documentation.svg"/></div><div style="text-align:center" class="col-md-6"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><br/>Web-server</h1></div><div class="col-md-3"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4"></div><div style="padding-bottom:100px" class="container"><div class="row"><div id="_top"></div><div id="docPageContent" class="col-md-12"><div id="tutorialPageContent" class="row"><div class="col-md-9"><div><div id="Overview"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Overview</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>The web server exposes actions and files over http or https. You can visit the API in a browser, Curl, etc. <code>{url}?action=actionName</code> or <code>{url}/api/{actionName}</code> is how you would access an action. For example, using the default ports in <code>/config/servers/web.js</code> you could reach the status action with both <code>http://127.0.0.1:8080/status</code> or <code>http://127.0.0.1:8080/?action=status</code></p><p>HTTP responses are always JSON and follow the following format:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>{
</span><span>  hello: </span><span style="color:#219161">&quot;world&quot;</span><span>,
</span>  serverInformation: {
<span>    serverName: </span><span style="color:#219161">&quot;Actionhero API&quot;</span><span>,
</span><span>    apiVersion: </span><span style="color:#40a070">1</span><span>,
</span><span>    requestDuration: </span><span style="color:#40a070">14</span><span>
</span>  },
<!-- -->  requestorInformation: {
<span>    </span><span style="color:#408080;font-style:italic">remoteAddress: &quot;127.0.0.1&quot;,</span><span>
</span><span>    Requests</span><span style="color:#408080;font-style:italic">Remaining: 989,</span><span>
</span>    receivedParams: {
<span>      action: </span><span style="color:#219161">&quot;&quot;</span><span>
</span>    }
<!-- -->  }
<!-- -->}
</code></pre><div><div id="Full HTTP Example"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Full HTTP Example</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>&gt; curl </span><span style="color:#219161">&#x27;localhost:8080/api/status&#x27;</span><span> -v | python -mjson.tool
</span><span>* About to connect() to localhost port </span><span style="color:#40a070">8080</span><span> (#</span><span style="color:#40a070">0</span><span>)
</span><span>*   Trying </span><span style="color:#40a070">127.0</span><span style="color:#40a070">.0</span><span style="color:#40a070">.1</span><span>...
</span>* connected
<span>* Connected to localhost (</span><span style="color:#40a070">127.0</span><span style="color:#40a070">.0</span><span style="color:#40a070">.1</span><span>) port </span><span style="color:#40a070">8080</span><span> (#</span><span style="color:#40a070">0</span><span>)
</span><span>&gt; GET /api/status HTTP/</span><span style="color:#40a070">1.1</span><span>
</span><span>&gt; User-Agent: curl/</span><span style="color:#40a070">7.24</span><span style="color:#40a070">.0</span><span> (x86_64-apple-darwin12</span><span style="color:#40a070">.0</span><span>) libcurl/</span><span style="color:#40a070">7.24</span><span style="color:#40a070">.0</span><span> OpenSSL/</span><span style="color:#40a070">0.9</span><span style="color:#40a070">.8</span><span>r zlib/</span><span style="color:#40a070">1.2</span><span style="color:#40a070">.5</span><span>
</span><span>&gt; Host: localhost:</span><span style="color:#40a070">8080</span><span>
</span><span>&gt; Accept: *</span><span style="color:#408080;font-style:italic">/*
</span>&gt;
<!-- -->&lt; HTTP/1.1 200 OK
<!-- -->&lt; Content-Type: application/json
<!-- -->&lt; X-Powered-By: Actionhero API
<!-- -->&lt; Date: Sun, 29 Jul 2012 23:25:53 GMT
<!-- -->&lt; Connection: keep-alive
<!-- -->&lt; Transfer-Encoding: chunked
<!-- -->&lt;
<!-- -->{ [data not shown]
<!-- -->100   741    0   741    0     0   177k      0 --:--:-- --:--:-- --:--:--  361k
<!-- -->* Connection #0 to host localhost left intact
<!-- -->* Closing connection #0
<!-- -->{
<!-- -->    &quot;requestorInformation&quot;: {
<!-- -->        &quot;receivedParams&quot;: {
<!-- -->            &quot;action&quot;: &quot;status&quot;,
<!-- -->        },
<!-- -->        &quot;remoteAddress&quot;: &quot;127.0.0.1&quot;
<!-- -->    },
<!-- -->    &quot;serverInformation&quot;: {
<!-- -->        &quot;apiVersion&quot;: &quot;3.0.0&quot;,
<!-- -->        &quot;currentTime&quot;: 1343604353551,
<!-- -->        &quot;requestDuration&quot;: 1,
<!-- -->        &quot;serverName&quot;: &quot;Actionhero API&quot;
<!-- -->    },
<!-- -->    &quot;stats&quot;:
<!-- -->        &quot;id&quot;: &quot;10.0.1.12:8080:4443:5000&quot;,
<!-- -->        &quot;uptimeSeconds&quot;: 34.163
<!-- -->    }
<!-- -->}
</code></pre><ul><li>You can provide the <code>?callback=myFunc</code> param to initiate a JSONp response which will wrap the returned JSON in your callback <code>function</code>. The mime type of the response will change from JSON to Javascript.</li><li>If everything went OK with your request, no error attribute will be set on the response, otherwise, you should see either a string or hash error response within your action</li><li>To build the response for &quot;hello&quot; above, the action would have set <code>data.response.hello = &#x27;world&#x27;</code> in an action.</li></ul><div><div id="Config Options"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Config Options</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><code>/config/servers/web.js</code> contains the settings for the web server. The relevant options are:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>export const DEFAULT = {
</span>  servers: {
<!-- -->    web: (config) =&gt; {
<!-- -->      return {
<span>        enabled: </span><span style="color:#954121">true</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// HTTP or HTTPS?  This setting is to enable SSL termination directly in the Actionhero app, not set redirection host headers</span><span>
</span><span>        secure: </span><span style="color:#954121">false</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Passed to https.createServer if secure=true. Should contain SSL certificates</span><span>
</span>        serverOptions: {},
<span>        </span><span style="color:#408080;font-style:italic">// Should we redirect all traffic to the first host in this array if hte request header doesn&#x27;t match?</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// i.e.: [ &#x27;https://www.site.com&#x27; ]</span><span>
</span>        allowedRequestHosts: process.env.ALLOWED_HOSTS
<span>          ? process.env.ALLOWED_HOSTS.split(</span><span style="color:#219161">&quot;,&quot;</span><span>)
</span>          : [],
<span>        </span><span style="color:#408080;font-style:italic">// Port or Socket Path</span><span>
</span><span>        port: process.env.PORT || </span><span style="color:#40a070">8080</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Which IP to listen on (use &#x27;0.0.0.0&#x27; for all; &#x27;::&#x27; for all on ipv4 and ipv6)</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// Set to `null` when listening to socket</span><span>
</span><span>        bindIP: </span><span style="color:#219161">&quot;0.0.0.0&quot;</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Any additional headers you want Actionhero to respond with</span><span>
</span>        httpHeaders: {
<span>          </span><span class="hljs-attr">&quot;X-Powered-By&quot;</span><span>: config.general.serverName,
</span><span>          </span><span class="hljs-attr">&quot;Access-Control-Allow-Origin&quot;</span><span>: </span><span style="color:#219161">&quot;*&quot;</span><span>,
</span><span>          </span><span class="hljs-attr">&quot;Access-Control-Allow-Methods&quot;</span><span>:
</span><span>            </span><span style="color:#219161">&quot;HEAD, GET, POST, PUT, PATCH, DELETE, OPTIONS, TRACE&quot;</span><span>,
</span><span>          </span><span class="hljs-attr">&quot;Access-Control-Allow-Headers&quot;</span><span>: </span><span style="color:#219161">&quot;Content-Type&quot;</span><span>,
</span><span>          </span><span class="hljs-attr">&quot;Strict-Transport-Security&quot;</span><span>: </span><span style="color:#219161">&quot;max-age=31536000; includeSubDomains&quot;</span><span>,
</span>        },
<span>        </span><span style="color:#408080;font-style:italic">// Route that actions will be served from; secondary route against this route will be treated as actions,</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">//  IE: /api/?action=test == /api/test/</span><span>
</span><span>        urlPathForActions: </span><span style="color:#219161">&quot;api&quot;</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Route that static files will be served from;</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">//  path (relative to your project root) to serve static content from</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">//  set to `null` to disable the file server entirely</span><span>
</span><span>        urlPathForFiles: </span><span style="color:#219161">&quot;public&quot;</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// When visiting the root URL, should visitors see &#x27;api&#x27; or &#x27;file&#x27;?</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">//  Visitors can always visit /api and /public as normal</span><span>
</span><span>        rootEndpointType: </span><span style="color:#219161">&quot;file&quot;</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// simple routing also adds an &#x27;all&#x27; route which matches /api/:action for all actions</span><span>
</span><span>        simpleRouting: </span><span style="color:#954121">true</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// queryRouting allows an action to be defined via a URL param, ie: /api?action=:action</span><span>
</span><span>        queryRouting: </span><span style="color:#954121">true</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// The cache or (if etags are enabled) next-revalidation time to be returned for all flat files served from /public; defined in seconds</span><span>
</span><span>        flatFileCacheDuration: </span><span style="color:#40a070">60</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Add an etag header to requested flat files which acts as fingerprint that changes when the file is updated;</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// Client will revalidate the fingerprint at latest after flatFileCacheDuration and reload it if the etag (and therefore the file) changed</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// or continue to use the cached file if it&#x27;s still valid</span><span>
</span><span>        enableEtag: </span><span style="color:#954121">true</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// should we save the un-parsed HTTP POST/PUT payload to connection.rawConnection.params.rawBody?</span><span>
</span><span>        saveRawBody: </span><span style="color:#954121">false</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// How many times should we try to boot the server?</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// This might happen if the port is in use by another process or the socketfile is claimed</span><span>
</span><span>        bootAttempts: </span><span style="color:#40a070">1</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Settings for determining the id of an http(s) request (browser-fingerprint)</span><span>
</span>        fingerprintOptions: {
<span>          cookieKey: </span><span style="color:#219161">&quot;sessionID&quot;</span><span>,
</span><span>          toSetCookie: </span><span style="color:#954121">true</span><span>,
</span><span>          onlyStaticElements: </span><span style="color:#954121">false</span><span>,
</span>          settings: {
<span>            path: </span><span style="color:#219161">&quot;/&quot;</span><span>,
</span><span>            expires: </span><span style="color:#40a070">3600000</span><span>,
</span>          },
<!-- -->        },
<span>        </span><span style="color:#408080;font-style:italic">// Options to be applied to incoming file uploads.</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">//  More options and details at https://github.com/felixge/node-formidable</span><span>
</span>        formOptions: {
<!-- -->          uploadDir: os.tmpdir(),
<span>          keepExtensions: </span><span style="color:#954121">false</span><span>,
</span><span>          maxFieldsSize: </span><span style="color:#40a070">1024</span><span> * </span><span style="color:#40a070">1024</span><span> * </span><span style="color:#40a070">20</span><span>,
</span><span>          maxFileSize: </span><span style="color:#40a070">1024</span><span> * </span><span style="color:#40a070">1024</span><span> * </span><span style="color:#40a070">200</span><span>,
</span>        },
<span>        </span><span style="color:#408080;font-style:italic">// Should we pad JSON responses with whitespace to make them more human-readable?</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// set to null to disable</span><span>
</span><span>        padding: </span><span style="color:#40a070">2</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// Options to configure metadata in responses</span><span>
</span>        metadataOptions: {
<span>          serverInformation: </span><span style="color:#954121">true</span><span>,
</span><span>          requesterInformation: </span><span style="color:#954121">true</span><span>,
</span>        },
<span>        </span><span style="color:#408080;font-style:italic">// When true, returnErrorCodes will modify the response header for http(s) clients if connection.error is not null.</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// You can also set connection.rawConnection.responseHttpCode to specify a code per request.</span><span>
</span><span>        returnErrorCodes: </span><span style="color:#954121">true</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// should this node server attempt to gzip responses if the client can accept them?</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// this will slow down the performance of Actionhero, and if you need this functionality, it is recommended that you do this upstream with nginx or your load balancer</span><span>
</span><span>        compress: </span><span style="color:#954121">false</span><span>,
</span><span>        </span><span style="color:#408080;font-style:italic">// options to pass to the query parser</span><span>
</span><span>        </span><span style="color:#408080;font-style:italic">// learn more about the options @ https://github.com/hapijs/qs</span><span>
</span>        queryParseOptions: {},
<!-- -->      };
<!-- -->    },
<!-- -->  },
<!-- -->};
</code></pre><p>Note that if you wish to create a secure (https) server, you will be required to complete the serverOptions hash with at least a cert and a keyfile:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#954121">config</span><span style="color:#19469d">.server</span><span style="color:#19469d">.web</span><span style="color:#19469d">.serverOptions</span><span>: {
</span><span>  </span><span style="color:#000080;font-weight:normal">key</span><span>: fs.</span><span style="color:#0086b3">readFileSync</span><span>(</span><span style="color:#219161">&#x27;certs/server-key.pem&#x27;</span><span>),
</span><span>  cert: fs.</span><span style="color:#0086b3">readFileSync</span><span>(</span><span style="color:#219161">&#x27;certs/server-cert.pem&#x27;</span><span>)
</span>}
</code></pre><div><div id="The Connection Object"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">The Connection Object</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>{ id: &#x27;</span><span style="color:#40a070">3e55</span><span>b464fd34708eba26f609f44481a120e094a8-a6dfb60b</span><span style="color:#40a070">-9562</span><span style="color:#40a070">-4</span><span>cc0</span><span style="color:#40a070">-9</span><span>d92-bc6cc1b622ba&#x27;,
</span><span>  connectedAt: </span><span style="color:#40a070">1447554153233</span><span>,
</span>  type: &#x27;web&#x27;,
<!-- -->  rawConnection:
<!-- -->   {
<!-- -->     req: {},
<!-- -->     res: {},
<!-- -->     params: { query: {} },
<!-- -->     method: &#x27;GET&#x27;,
<!-- -->     cookies: {},
<!-- -->     responseHeaders: [ [Object], [Object], [Object], [Object], [Object], [Object] ],
<span>     responseHttpCode: </span><span style="color:#40a070">200</span><span>,
</span>     parsedURL:
<!-- -->      Url {},
<span>  remotePort: </span><span style="color:#40a070">57259</span><span>,
</span><span>  remoteIP: &#x27;</span><span style="color:#40a070">127.0</span><span style="color:#40a070">.0</span><span style="color:#40a070">.1</span><span>&#x27;,
</span><span>  error: </span><span style="color:#954121">null</span><span>,
</span><span>  fingerprint: &#x27;</span><span style="color:#40a070">3e55</span><span>b464fd34708eba26f609f44481a120e094a8&#x27;,
</span>  rooms: [],
<span>  params: { action: &#x27;randomNumber&#x27;, apiVersion: </span><span style="color:#40a070">1</span><span> },
</span><span>  pendingActions: </span><span style="color:#40a070">1</span><span>,
</span><span>  totalActions: </span><span style="color:#40a070">1</span><span>,
</span><span>  messageId: </span><span style="color:#40a070">0</span><span>,
</span><span>  canChat: </span><span style="color:#954121">false</span><span>,
</span>  sendMessage: [Function],
<!-- -->  sendFile: [Function]
<!-- -->}
</code></pre><p>when inspecting <code>data.connection</code> in actions or action middleware from web client, a few additional elements are added for convenience:</p><ul><li><code>connection.rawConnection.responseHeaders</code>: array of headers which can be built up in the action. Headers will be made unique, and latest header will be used (except setting cookies)</li><li><code>connection.rawConnection.method</code>: A string, GET, POST, etc</li><li><code>connection.rawConnection.cookies</code>: Hash representation of the connection&#x27;s cookies</li><li><code>connection.rawConnection.responseHttpCode</code>: the status code to be rendered to the user. Defaults to 200</li><li><code>connection.type</code> for a HTTP client is &quot;web&quot;</li><li><code>connection.rawConnection.params.body</code> will contain un-filtered form data</li><li><code>connection.rawConnection.params.files</code> will contain un-filtered form data</li><li><code>connection.extension</code>. If are using a route to access an action, and the request path ends in a file extension (IE: <code>server.com/action/option.jpg</code>), the extension will be available. Depending on the server&#x27;s options, this extension may also be used to modify the response mime-type by configuring <code>matchExtensionMimeType</code> within each action.</li></ul><div><div id="Sending Files"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Sending Files</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Actionhero can also serve up flat files. Actionhero will not cache these files and each request to <code>file</code> will re-read the file from disk (like the nginx web server).</p><p>If the file you want to send is within your <code>/public</code> directory you can use:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>async run (</span><span style="color:#000080;font-weight:normal">data</span><span>) {
</span><span>  data.connection.sendFile(</span><span style="color:#219161">&quot;/path/to/file.mp3&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>  data.toRender = </span><span style="color:#954121">false</span><span style="color:#408080;font-style:italic">;</span><span>
</span>}
</code></pre><p>Otherwise, you&#x27;ll need to pipe the file and set headers directly:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>async run (data) {
</span><span>  const file = await </span><span class="hljs-module-access hljs-module hljs-identifier">File</span><span class="hljs-module-access hljs-module">.</span><span>find</span><span class="hljs-constructor">One({</span><span class="hljs-constructor" style="color:#00f">where</span><span class="hljs-constructor">: {</span><span class="hljs-constructor" style="color:#00f">id</span><span class="hljs-constructor">: </span><span class="hljs-constructor" style="color:#00f">data</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">params</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">fileId</span><span class="hljs-constructor">}})</span><span>
</span><span>  </span><span style="color:#954121">if</span><span> (file) {
</span><span>    const fileBuffer = await fs.read</span><span class="hljs-constructor">File(</span><span class="hljs-constructor" style="color:#00f">file</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">localPath</span><span class="hljs-constructor">, &#x27;</span><span class="hljs-constructor" style="color:#00f">binary</span><span class="hljs-constructor">&#x27;)</span><span>
</span><span>    data.connection.rawConnection.res.write</span><span class="hljs-constructor">Head(200, {
</span><span class="hljs-constructor">      &#x27;Content-Disposition&#x27;: `</span><span class="hljs-constructor" style="color:#00f">attachment</span><span class="hljs-constructor">; </span><span class="hljs-constructor" style="color:#00f">filename</span><span class="hljs-constructor">=${</span><span class="hljs-constructor" style="color:#00f">file</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">name</span><span class="hljs-constructor">}`,
</span><span class="hljs-constructor">      &#x27;Content-Type&#x27;: </span><span class="hljs-constructor" style="color:#00f">file</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">mimeType</span><span class="hljs-constructor">,
</span><span class="hljs-constructor">      &#x27;Content-Length&#x27;: Buffer.</span><span class="hljs-constructor" style="color:#00f">byteLength</span><span class="hljs-constructor">(</span><span class="hljs-constructor" style="color:#00f">fileBuffer</span><span class="hljs-constructor">)</span><span>
</span>    })
<!-- -->    data.connection.rawConnection.res.write(fileBuffer)
<span>    data.connection.rawConnection.res.</span><span style="color:#954121">end</span><span style="color:#954121">()</span><span>
</span><span>    data.toRender = </span><span style="color:#954121">false</span><span>
</span><span>  } </span><span style="color:#954121">else</span><span> {
</span><span>    throw </span><span style="color:#954121">new</span><span> </span><span class="hljs-constructor">Error(`File </span><span class="hljs-constructor" style="color:#00f">with</span><span class="hljs-constructor"> </span><span class="hljs-constructor" style="color:#00f">id</span><span class="hljs-constructor"> ${</span><span class="hljs-constructor" style="color:#00f">data</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">params</span><span class="hljs-constructor">.</span><span class="hljs-constructor" style="color:#00f">fileId</span><span class="hljs-constructor">} </span><span class="hljs-constructor" style="color:#00f">not</span><span class="hljs-constructor"> </span><span class="hljs-constructor" style="color:#00f">found</span><span class="hljs-constructor">`)</span><span>
</span>  }
<!-- -->}
</code></pre><p>There are helpers you can use in your actions to send files:</p><ul><li><code>/public</code> and <code>/api</code> are routes which expose the directories of those types. These top level path can be configured in <code>/config/servers/web.js</code> with <code>config.servers.web.urlPathForActions</code> and <code>config.servers.web.urlPathForFiles</code>.</li><li>the root of the web server &quot;/&quot; can be toggled to serve the content between /file or /api actions per your needs <code>config.servers.web.rootEndpointType</code>. The default is <code>api</code>.</li><li>Actionhero will serve up flat files (html, images, etc) as well from your ./public folder. This is accomplished via the <code>file</code> route as described above. <code>http://{baseUrl}/public/{pathToFile}</code> is equivalent to <code>http://{baseUrl}?action=file&amp;fileName={pathToFile}</code> and <code>http://{baseUrl}/file/{pathToFile}</code>.</li><li>Errors will result in a 404 (file not found) with a message you can customize.</li><li>Proper mime-type headers will be set when possible via the <code>mime</code> package.</li></ul><p>See the <a href="tutorials/file-server">file server</a> page for more documentation</p><div><div id="Routes"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Routes</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>For web clients, you can define an optional RESTful mapping to help route requests to actions. If the client doesn&#x27;t specify an action via a param, and the base route isn&#x27;t a named action, the action will attempt to be discerned from this <code>config/routes.js</code> file.</p><p>This variables in play here are:</p><ul><li><code>config.servers.web.urlPathForActions</code></li><li><code>config.servers.web.rootEndpointType</code></li><li>and of course the content of <code>config/routes.js</code></li></ul><p>Say you have an action called ‘status&#x27; (like in a freshly generated Actionhero project). Lets start with Actionhero&#x27;s default config:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span class="hljs-attr">config.servers.web.urlPathForActions</span><span> = </span><span style="color:#219161">&quot;api&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span></span><span class="hljs-attr">config.servers.web.urlPathForFiles</span><span> = </span><span style="color:#219161">&quot;public&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span></span><span class="hljs-attr">config.servers.web.rootEndpointType</span><span> = </span><span style="color:#219161">&quot;file&quot;</span><span style="color:#408080;font-style:italic">;</span></code></pre><p>There are 3 ways a client can access actions via the web server.</p><ul><li>no routing at all and use GET params: <code>server.com/api?action=status</code></li><li>with ‘basic&#x27; routing, where the action&#x27;s name will respond after the /api path: <code>server.com/api/status</code></li><li>or you can modify this with routes. Say you want <code>server.com/api/stuff/statusPage</code></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>export const DEFAULT = </span><span style="color:#954121">function</span><span>(api) {
</span><span>  </span><span style="color:#954121">return</span><span> {
</span><span>    </span><span style="color:#954121">get</span><span>: [
</span><span>      { </span><span style="color:#19469d">path</span><span>: ‘/stuff/statusPag</span><span style="color:#219161">e&#x27;, action: &#x27;</span><span>status</span><span style="color:#219161">&#x27; }
</span>    ]
<!-- -->  };
<!-- -->}
</code></pre><p>If the <code>config.servers.web.rootEndpointType</code> is <code>&quot;file&quot;</code> which means that the routes you are making are active only under the <code>/api</code> path. If you wanted the route example to become <code>server.com/stuff/statusPage</code>, you would need to change <code>config.servers.web.rootEndpointType</code> to be ‘api&#x27;. Note that making this change doesn&#x27;t stop <code>server.com/api/stuff/statusPage</code> from working as well, as you still have <code>config.servers.web.urlPathForActions</code> set to be ‘api&#x27;, so both will continue to work.</p><p>For a route to match, all params must be satisfied. So, if you expect a route to provide <code>api/:a/:b/:c</code> and the request is only for <code>api/:a/:c</code>, the route won&#x27;t match. This holds for any variable, including <code>:apiVersion</code>. If you want to match both with and without apiVersion, just define the rote 2x, IE:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>export const DEFAULT = function (api) {
</span>  return {
<!-- -->    all: [
<span>      { path: </span><span style="color:#219161">&quot;/cache/:key/:value&quot;</span><span>, action: </span><span style="color:#219161">&quot;cacheTest&quot;</span><span> },
</span><span>      { path: </span><span style="color:#219161">&quot;/:apiVersion/cache/:key/:value&quot;</span><span>, action: </span><span style="color:#219161">&quot;cacheTest&quot;</span><span> },
</span>    ],
<!-- -->  };
<!-- -->};
</code></pre><p>If you want to shut off access to your action at <code>server.com/api/stuff/statusPage</code> and only allow access via <code>server.com/stuff/statusPage</code>, you can disable <code>config.servers.web.urlPathForActions</code> by setting it equal to <code>null</code> (but keeping the <code>config.servers.web.rootEndpointType</code> equal to <code>api</code>).</p><p>Routes will match the newest version of <code>apiVersion</code>. If you want to have a specific route match a specific version of an action, you can provide the <code>apiVersion</code> param in your route definitions:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>export const DEFAULT = function (api) {
</span>  return {
<!-- -->    get: [
<span>      { path: </span><span style="color:#219161">&quot;/myAction/old&quot;</span><span>, action: </span><span style="color:#219161">&quot;myAction&quot;</span><span>, apiVersion: </span><span style="color:#40a070">1</span><span> },
</span><span>      { path: </span><span style="color:#219161">&quot;/myAction/new&quot;</span><span>, action: </span><span style="color:#219161">&quot;myAction&quot;</span><span>, apiVersion: </span><span style="color:#40a070">2</span><span> },
</span>    ],
<!-- -->  };
<!-- -->};
</code></pre><p>This would create both <code>/api/myAction/old</code> and <code>/api/myAction/new</code>, mapping to apiVersion 1 and 2 respectively.</p><p>In your actions and middleware, if a route was matched, you can see the details of the match by inspecting <code>data.connection.matchedRoute</code> which will include <code>path</code> and <code>action</code>.</p><p>Finally, you can toggle an option, <code>matchTrailingPathParts</code>, which allows the final segment of your route to absorb all trailing path parts in a matched variable.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>post: [
</span><span>  </span><span style="color:#b68">//</span><span> yes match: site.com</span><span style="color:#b68">/api/</span><span style="color:#40a070">123</span><span>
</span><span>  </span><span style="color:#b68">//</span><span> no match: site.com</span><span style="color:#b68">/api/</span><span style="color:#40a070">123</span><span>/admin
</span><span>  { path: </span><span style="color:#219161">&#x27;/login/:userId(.*)&#x27;</span><span>, action: </span><span style="color:#219161">&#x27;login&#x27;</span><span> }
</span>],
<!-- -->
<!-- -->post: [
<span>  </span><span style="color:#b68">//</span><span> yes match: site.com</span><span style="color:#b68">/api/</span><span style="color:#40a070">123</span><span>
</span><span>  </span><span style="color:#b68">//</span><span> yes match: site.com</span><span style="color:#b68">/api/</span><span style="color:#40a070">123</span><span>/admin
</span><span>  { path: </span><span style="color:#219161">&#x27;/login/:userId(.*)&#x27;</span><span>, action: </span><span style="color:#219161">&#x27;login&#x27;</span><span>, matchTrailingPathParts: true }
</span>],
</code></pre><p>This also enables &quot;catch all&quot; routes, like:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>get: [
</span><span>  { path: ‘:path(.*)&#x27;, action: ‘catchAll&#x27;, matchTrailingPathParts: </span><span style="color:#954121">true</span><span> }
</span>],
</code></pre><p>If you have a route with multiple variables defined and <code>matchTrailingPathParts</code> is true, only the final segment will match the trailing sections:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>get: [
</span><span>  </span><span style="color:#b68">//</span><span> the route site.com</span><span style="color:#b68">/users/</span><span style="color:#40a070">123</span><span style="color:#b68">/should/</span><span style="color:#954121">do</span><span style="color:#b68">/a/</span><span>thing would become {userId: </span><span style="color:#40a070">123</span><span>, path: ‘</span><span style="color:#b68">/should/</span><span style="color:#954121">do</span><span style="color:#b68">/a/</span><span>thing</span><span style="color:#219161">&#x27;}
</span><span style="color:#219161">  { path: ‘/users/:userId/:path(.*)&#x27;</span><span>, action: ‘catchAll</span><span style="color:#219161">&#x27;, matchTrailingPathParts: true }
</span>],
</code></pre><p><strong>Note</strong>: In regular expressions used for routing, you cannot use the &quot;/&quot; character.</p><div><div id="Handling Static Folders with Routes"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Handling Static Folders with Routes</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>If you want map a special public folder to a given route you can use the &quot;dir&quot; parameter in your &quot;get&quot; routes in the routes.js file:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>get: [
</span><span>  { path: ‘/my/special/folde</span><span style="color:#219161">r&#x27;, dir: __dirname + ‘/…/public/my/special/folder&#x27;</span><span>, matchTrailingPathParts: true }
</span>],
</code></pre><p>After mapping this route all files/folders within the mapped folder will be accessible on the route.</p><p>You have to map the specified public folder within the &quot;dir&quot; parameter, relative to the routes.js file or absolute. Make sure to set &quot;matchTrailingPathParts&quot; to &quot;true&quot;, because when it is set to false, the route will never match when you request a file. (e.g.: site.com/my/special/folder/testfile.txt).</p><div><div id="Route Notes"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Route Notes</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><ul><li>actions defined in params directly <code>action=theAction</code> or hitting the named URL for an action <code>/api/theAction</code> will never override RESTful routing</li><li>you can mix explicitly defined params with route-defined params. If there is an overlap, the route-defined params win<ul><li>IE: /api/user/123?userId=456 =&gt; <code>connection.userId = 123</code></li></ul></li><li>routes defined with the &quot;all&quot; method will be duplicated to &quot;get&quot;, &quot;put&quot;, &quot;post&quot;, and &quot;delete&quot;</li><li>use &quot;:variable&quot; to define &quot;variable&quot;</li><li>an undefined &quot;:variable&quot; will not match<ul><li>IE: &quot;/api/user/&quot; will not match &quot;/api/user/:userId&quot;</li><li>You would need a second route in this case to match &quot;/api/user&quot;</li></ul></li><li>routes are matched as defined top-down in <code>routes.js</code></li><li>you can optionally define a regex match along with your route variable<ul><li>IE: <code>{</code>path:&quot;/game/:id(^<a href="">a-z</a>{0,10}\$)&quot;, action: &quot;gamehandler&quot; }<code>}</code></li><li>be sure to double-escape when needed: <code>{</code> path: &quot;/login/:userID(^<!-- -->\<!-- -->d{3}\$)&quot;, action: &quot;login&quot; }<code>}</code></li></ul></li><li>The HTTP verbs which you can route against are: <code>api.routes.verbs = [&#x27;head&#x27;, &#x27;get&#x27;, &#x27;post&#x27;, &#x27;put&#x27;, &#x27;patch&#x27;, &#x27;delete&#x27;]</code></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>export const DEFAULT = function (api) {
</span>  return {
<!-- -->    get: [
<span>      { path: </span><span style="color:#219161">&quot;/users&quot;</span><span>, action: </span><span style="color:#219161">&quot;usersList&quot;</span><span> }, </span><span style="color:#408080;font-style:italic">// (GET) /api/users</span><span>
</span><span>      { path: </span><span style="color:#219161">&quot;/search/:term/limit/:limit/offset/:offset&quot;</span><span>, action: </span><span style="color:#219161">&quot;search&quot;</span><span> }, </span><span style="color:#408080;font-style:italic">// (GET) /api/search/car/limit/10/offset/100</span><span>
</span>    ],
<!-- -->
<!-- -->    post: [
<span>      { path: </span><span style="color:#219161">&quot;/login/:userID(^\\d{3}$)&quot;</span><span>, action: </span><span style="color:#219161">&quot;login&quot;</span><span> }, </span><span style="color:#408080;font-style:italic">// (POST) /api/login/123</span><span>
</span>    ],
<!-- -->
<!-- -->    all: [
<span>      { path: </span><span style="color:#219161">&quot;/user/:userID&quot;</span><span>, action: </span><span style="color:#219161">&quot;user&quot;</span><span> }, </span><span style="color:#408080;font-style:italic">// (*) / /api/user/123</span><span>
</span>    ],
<!-- -->  };
<!-- -->};
</code></pre><div><div id="Hosts"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Hosts</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Actionhero allows you to define a collection of host headers which this API server will allow access from. You can set these via <code>config.servers.web.allowedRequestHosts</code>. If the <code>Host</code> header of a client does not match one of those listed (protocol counts!), they will be redirected to the first one present.</p><p>You can also set <code>process.env.ALLOWED_HOSTS</code> which will be parsed as a comma-separated list of Hosts which will set <code>config.servers.web.allowedRequestHosts</code></p><div><div id="Parameters"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Parameters</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Params provided by the user (GET, POST, etc for http and https servers, setParam for TCP clients, and passed to action calls from a web socket client) will be checked against a whitelist defined by your action (can be disabled in <code>/config/servers/web.js</code>). Variables defined in your actions by <code>action.inputs</code> will be added to your whitelist. Special params which the api will always accept are:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>[
</span><span>  ‘fil</span><span style="color:#219161">e&#x27;,
</span><span style="color:#219161">  ‘apiVersion&#x27;</span><span>,
</span><span>  ‘callback</span><span style="color:#219161">&#x27;,
</span><span style="color:#219161">  ‘action&#x27;</span><span>,
</span>]
</code></pre><p>Params are loaded in this order GET -&gt; POST (normal) -&gt; POST (multipart). This means that if you have <code>{url}?key=getValue</code> and you post a variable <code>key=postValue</code> as well, the <code>postValue</code> will be the one used. The only exception to this is if you use the URL method of defining your action. You can add arbitrary params to the whitelist by adding them to the <code>api.postVariables</code> array in your initializers.</p><p>File uploads from forms will also appear in <code>connection.params</code>, but will be an object with more information. That is, if you uploaded a file called &quot;image&quot;, you would have <code>connection.params.image.path</code>, <code>connection.params.image.name</code> (original file name), and <code>connection.params.image.type</code> available to you.</p><p>A note on JSON payloads:</p><p>You can post BODY json payloads to Actionhero in the form of a hash or array.</p><p><strong>Hash</strong>: <code>curl -X POST -d &#x27;{&quot;key&quot;:&quot;something&quot;, &quot;value&quot;:{&quot;a&quot;:1, &quot;b&quot;:2}}&#x27; http://localhost:8080/api/cacheTest</code>. This will result in:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>connection.params = {
</span>  key: ‘something&#x27;,
<!-- -->  value: {
<span>    a: </span><span style="color:#40a070">1</span><span>,
</span><span>    b: </span><span style="color:#40a070">2</span><span>
</span>  }
<!-- -->}
</code></pre><p><strong>Array</strong>: <code>curl -X POST -d &#x27;[{&quot;key&quot;:&quot;something&quot;, &quot;value&quot;:{&quot;a&quot;:1, &quot;b&quot;:2}}]&#x27; http://localhost:8080/api/cacheTest</code>. In this case, we set the array to the param key <code>payload</code>:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>connection.params = {
</span>  payload: [
<!-- -->    {
<!-- -->      key: &#x27;something&#x27;
<!-- -->      value: {
<span>        a: </span><span style="color:#40a070">1</span><span>,
</span><span>        b: </span><span style="color:#40a070">2</span><span>
</span>      }
<!-- -->    }
<!-- -->  ]
<!-- -->}
</code></pre><div><div id="Uploading Files"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Uploading Files</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Actionhero uses the <a href="https://github.com/felixge/node-formidable">formidable</a> form parsing library. You can set options for it via <code>config.servers.web.formOptions</code>. You can upload multiple files to an action and they will be available within <code>connection.params</code> as formidable response objects containing references to the original file name, where the uploaded file was stored temporarily, etc. Here is an example:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// actions/uploader.js</span><span>
</span><span></span><span style="color:#954121">import</span><span> { </span><span style="color:#19469d">Action</span><span> } from </span><span style="color:#219161">&quot;Actionhero&quot;</span><span>;
</span>
<span>export </span><span class="hljs-class" style="color:#954121">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">Uploader</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#954121">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">Action</span><span class="hljs-class"> </span><span>{
</span>  constructor() {
<span>    </span><span style="color:#954121">super</span><span>();
</span><span>    </span><span style="color:#954121">this</span><span>.name = </span><span style="color:#219161">&quot;uploader&quot;</span><span>;
</span><span>    </span><span style="color:#954121">this</span><span>.description = </span><span style="color:#219161">&quot;File upload Service&quot;</span><span>;
</span><span>    </span><span style="color:#954121">this</span><span>.input = {
</span><span>      file1: { required: </span><span style="color:#954121">true</span><span> },
</span><span>      file2: { required: </span><span style="color:#954121">false</span><span> },
</span><span>      key1: { required: </span><span style="color:#954121">false</span><span> },
</span><span>      key2: { required: </span><span style="color:#954121">false</span><span> },
</span>    };
<!-- -->  }
<!-- -->
<!-- -->  async run(data) {
<!-- -->    console.log(data);
<!-- -->  }
<!-- -->}
</code></pre><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">&lt;!-- public/uploader.html --&gt;</span><span>
</span>
<span></span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">html</span><span style="color:#000080;font-weight:normal">&gt;</span><span>
</span><span>  </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">head</span><span style="color:#000080;font-weight:normal">&gt;</span><span style="color:#000080;font-weight:normal">&lt;/</span><span style="color:#000080;font-weight:normal">head</span><span style="color:#000080;font-weight:normal">&gt;</span><span>
</span><span>  </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">body</span><span style="color:#000080;font-weight:normal">&gt;</span><span>
</span><span>    </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">form</span><span style="color:#000080;font-weight:normal">
</span><span style="color:#000080;font-weight:normal">      </span><span class="hljs-attr" style="color:#000080;font-weight:normal">method</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;post&quot;</span><span style="color:#000080;font-weight:normal">
</span><span style="color:#000080;font-weight:normal">      </span><span class="hljs-attr" style="color:#000080;font-weight:normal">enctype</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;multipart/form-data&quot;</span><span style="color:#000080;font-weight:normal">
</span><span style="color:#000080;font-weight:normal">      </span><span class="hljs-attr" style="color:#000080;font-weight:normal">action</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;http://localhost:8080/api/uploader&quot;</span><span style="color:#000080;font-weight:normal">
</span><span style="color:#000080;font-weight:normal">    &gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">input</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">type</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;file&quot;</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">name</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;file1&quot;</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">input</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">type</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;file&quot;</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">name</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;file2&quot;</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">br</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">br</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">input</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">type</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;text&quot;</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">name</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;key1&quot;</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">input</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">type</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;text&quot;</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">name</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;key2&quot;</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">br</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">br</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>      </span><span style="color:#000080;font-weight:normal">&lt;</span><span style="color:#000080;font-weight:normal">input</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">type</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;submit&quot;</span><span style="color:#000080;font-weight:normal"> </span><span class="hljs-attr" style="color:#000080;font-weight:normal">value</span><span style="color:#000080;font-weight:normal">=</span><span style="color:#219161;font-weight:normal">&quot;send&quot;</span><span style="color:#000080;font-weight:normal"> /&gt;</span><span>
</span><span>    </span><span style="color:#000080;font-weight:normal">&lt;/</span><span style="color:#000080;font-weight:normal">form</span><span style="color:#000080;font-weight:normal">&gt;</span><span>
</span><span>  </span><span style="color:#000080;font-weight:normal">&lt;/</span><span style="color:#000080;font-weight:normal">body</span><span style="color:#000080;font-weight:normal">&gt;</span><span>
</span><span></span><span style="color:#000080;font-weight:normal">&lt;/</span><span style="color:#000080;font-weight:normal">html</span><span style="color:#000080;font-weight:normal">&gt;</span></code></pre><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>// what the params look like to an action
</span>
<span></span><span class="yaml">{ </span><span class="yaml hljs-attr">action:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;uploader&#x27;</span><span class="yaml">,
</span><span class="yaml">  </span><span class="yaml hljs-attr">file1:</span><span class="yaml">
</span><span class="yaml">   { </span><span class="yaml hljs-attr">domain:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">null</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_events:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">null</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_maxListeners:</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">10</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">size:</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">5477608</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">path:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;/app/Actionhero/tmp/86b2aa018a9785e20b3f6cea95babcca&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">name:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;1-02 Concentration Enhancing Menu Initializer.mp3&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">type:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;audio/mp3&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">hash:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">false</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">lastModifiedDate:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">Wed</span><span class="yaml"> </span><span class="yaml" style="color:#219161">Feb</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">13</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">2013 20:32:49 </span><span class="yaml" style="color:#219161">GMT-0800</span><span class="yaml"> </span><span class="yaml" style="color:#219161">(PST)</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_writeStream:</span><span class="yaml">
</span><span class="yaml">      { </span><span class="yaml" style="color:#219161">...</span><span class="yaml"> },
</span><span class="yaml">     </span><span class="yaml hljs-attr">length:</span><span class="yaml"> [</span><span class="yaml" style="color:#219161">Getter</span><span class="yaml">],
</span><span class="yaml">     </span><span class="yaml hljs-attr">filename:</span><span class="yaml"> [</span><span class="yaml" style="color:#219161">Getter</span><span class="yaml">],
</span><span class="yaml">     </span><span class="yaml hljs-attr">mime:</span><span class="yaml"> [</span><span class="yaml" style="color:#219161">Getter</span><span class="yaml">] },
</span><span class="yaml">  </span><span class="yaml hljs-attr">file2:</span><span class="yaml">
</span><span class="yaml">   { </span><span class="yaml hljs-attr">domain:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">null</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_events:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">null</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_maxListeners:</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">10</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">size:</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">10439802</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">path:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;/app/Actionhero/tmp/6052010f1d75ceaeb9197a9a759124dc&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">name:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;1-10 There She Is.mp3&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">type:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;audio/mp3&#x27;</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">hash:</span><span class="yaml"> </span><span class="yaml" style="color:#954121">false</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">lastModifiedDate:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">Wed</span><span class="yaml"> </span><span class="yaml" style="color:#219161">Feb</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">13</span><span class="yaml"> </span><span class="yaml" style="color:#40a070">2013 20:32:49 </span><span class="yaml" style="color:#219161">GMT-0800</span><span class="yaml"> </span><span class="yaml" style="color:#219161">(PST)</span><span class="yaml">,
</span><span class="yaml">     </span><span class="yaml hljs-attr">_writeStream:</span><span class="yaml">
</span><span class="yaml">      { </span><span class="yaml" style="color:#219161">...</span><span class="yaml"> },
</span><span class="yaml">  </span><span class="yaml hljs-attr">key1:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;123&#x27;</span><span class="yaml">,
</span><span class="yaml">  </span><span class="yaml hljs-attr">key2:</span><span class="yaml"> </span><span class="yaml" style="color:#219161">&#x27;456&#x27;</span><span class="yaml">,
</span> }
</code></pre><div><div id="Client Library"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Client Library</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Although the <code>ActionheroWebsocketClient</code> client-side library is mostly for websockets, it can now be used to make http actions when not connected (and websocket clients will fall back to http actions when disconnected)</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>&lt;script </span><span style="color:#000080;font-weight:normal">src</span><span>=</span><span style="color:#219161">&quot;/public/javascript/ActionheroWebsocketClient.js&quot;</span><span>&gt;&lt;/script&gt;
</span>
<!-- -->&lt;script&gt;
<span>  var</span><span style="color:#0086b3"> client </span><span>= new ActionheroWebsocketClient();
</span><span>  client.action(</span><span style="color:#219161">&quot;cacheTest&quot;</span><span>, { key: </span><span style="color:#219161">&quot;k&quot;</span><span>, value: </span><span style="color:#219161">&quot;v&quot;</span><span> }, function (error, data) {
</span>    // do stuff
<!-- -->  });
<!-- -->&lt;/script&gt;
</code></pre><p>Note that we never called <code>client.connect</code>. More information can be found on the <a href="/docs/servers/websocket">websocket server docs page</a>.</p></div><div class="d-none d-md-block col-md-3"><div style="height:0"><div style="padding-top:90px;position:sticky;top:0"><ul style="list-style-type:none;padding-left:0;margin-left:0"></ul></div></div></div></div><br/><div><a style="text-decoration:none" href="/tutorials"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Back to Tutorials</button></a></div></div><div class="d-none d-md-block col-md-3"></div></div></div><div style="background-color:#6E8898;color:#2F5266;font-weight:300;padding-top:100px;padding-bottom:100px"><div class="container"><div class="row"><div class="col-md-2"></div><div style="text-align:center;color:#FBF9E4;padding-bottom:100px" class="col-md-8"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Solutions</h1><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="color:#FBF9E4">Actionhero was built from the ground up to include all the features you expect from a modern API framework.</span></h2></div><div class="col-md-2"></div></div><div class="row"><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-left:40px;padding-right:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Open Source</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>The Actionhero server is open source, under the Apache-2 license</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>Actionhero runs on Linux, OS X, and Windows</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>You always have access to the Actionhero team via<!-- --> <a href="/community">Slack and Github</a></p><br/><br/><div><a style="text-decoration:none" href="/downloads"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Download</button></a></div></div></div><div class="d-lg-none col-md-4"><div style="width:100%;padding:20px;background-color:#2F5266;color:#FFFFFF;box-shadow:0px 2px 4px #003C51"><div style="text-align:center"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><span style="color:#FBF9E4">Premium Training &amp; Review</span></h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Audits</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div><div class="d-none d-lg-block col-md-4"><div style="width:125%;padding:40px;background-color:#2F5266;color:#FFFFFF;position:relative;top:-60px;box-shadow:0px 2px 4px #003C51;margin-left:-13%;margin-right:-5%;z-index:10"><div style="text-align:center;padding-bottom:10px"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Premium Training &amp; Review</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Workshops</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-right:40px;padding-left:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Enterprise</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>For larger customers in need of a support contract, we offer an enterprise plan including everything in the Premium plan plus:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>24/7 access to core members of the Actionhero Team</strong></li><li><strong>Emergency response packages</strong></li><li><strong>Deployment support</strong></li><li><strong>...and custom development against Actionhero’s core as needed.</strong></li></ul><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200"><div class="container"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px" class="row"><div class="col-md-12"><img src="/static/images/actionhero-logo-header-wordmark.svg"/></div></div><div style="padding-bottom:100px" class="row"><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/terms">Terms</a></p><p>Contact us at<!-- --> <a style="color:#FBF9E4;font-weight:500" href="mailto:hello@actionherojs.com">hello@actionherojs.com</a></p><p>You can contribute to this website<!-- --> <a style="color:#FBF9E4;font-weight:500" href="https://github.com/actionhero/www.actionherojs.com" target="_blank">here</a>.</p><p><a href="https://medium.com/tag/actionherojs/latest" target="_new" style="color:#FBF9E4">Blogs</a></p><p style="color:#FFFFFF;font-weight:bold">© 2020<!-- --> <!-- -->Actionhero</p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/why">Why Actionhero</a></p><p><a style="color:#FBF9E4" href="/get-started">Get Started</a></p><p><a style="color:#FBF9E4" href="/key-concepts">Key Concepts</a></p><p><a href="https://docs.actionherojs.com" style="color:#FBF9E4">Documenation</a></p><p><a style="color:#FBF9E4" href="/solutions">Solutions</a></p><p><a style="color:#FBF9E4" href="/community">Community</a></p><p><a style="color:#FBF9E4" href="/downloads">Downloads</a></p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a href="https://www.npmjs.com/package/actionhero" target="_new" style="color:#FBF9E4">NPM</a></p><p><a href="https://twitter.com/actionherojs" target="_new" style="color:#FBF9E4">Twitter</a></p><p><a href="https://slack.actionherojs.com/" target="_new" style="color:#FBF9E4">Slack</a></p><p><a href="https://github.com/Actionhero/Actionhero" target="_new" style="color:#FBF9E4">Github</a></p><p><a href="https://actionherojs.threadless.com" target="_new" style="color:#FBF9E4">Shop</a></p></div></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"## Overview\n\nThe web server exposes actions and files over http or https. You can visit the API in a browser, Curl, etc. `{url}?action=actionName` or `{url}/api/{actionName}` is how you would access an action. For example, using the default ports in `/config/servers/web.js` you could reach the status action with both `http://127.0.0.1:8080/status` or `http://127.0.0.1:8080/?action=status`\n\nHTTP responses are always JSON and follow the following format:\n\n```ts\n{\n  hello: \"world\",\n  serverInformation: {\n    serverName: \"Actionhero API\",\n    apiVersion: 1,\n    requestDuration: 14\n  },\n  requestorInformation: {\n    remoteAddress: \"127.0.0.1\",\n    RequestsRemaining: 989,\n    receivedParams: {\n      action: \"\"\n    }\n  }\n}\n```\n\n## Full HTTP Example\n\n```\n\u003e curl 'localhost:8080/api/status' -v | python -mjson.tool\n* About to connect() to localhost port 8080 (#0)\n*   Trying 127.0.0.1...\n* connected\n* Connected to localhost (127.0.0.1) port 8080 (#0)\n\u003e GET /api/status HTTP/1.1\n\u003e User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5\n\u003e Host: localhost:8080\n\u003e Accept: */*\n\u003e\n\u003c HTTP/1.1 200 OK\n\u003c Content-Type: application/json\n\u003c X-Powered-By: Actionhero API\n\u003c Date: Sun, 29 Jul 2012 23:25:53 GMT\n\u003c Connection: keep-alive\n\u003c Transfer-Encoding: chunked\n\u003c\n{ [data not shown]\n100   741    0   741    0     0   177k      0 --:--:-- --:--:-- --:--:--  361k\n* Connection #0 to host localhost left intact\n* Closing connection #0\n{\n    \"requestorInformation\": {\n        \"receivedParams\": {\n            \"action\": \"status\",\n        },\n        \"remoteAddress\": \"127.0.0.1\"\n    },\n    \"serverInformation\": {\n        \"apiVersion\": \"3.0.0\",\n        \"currentTime\": 1343604353551,\n        \"requestDuration\": 1,\n        \"serverName\": \"Actionhero API\"\n    },\n    \"stats\":\n        \"id\": \"10.0.1.12:8080:4443:5000\",\n        \"uptimeSeconds\": 34.163\n    }\n}\n```\n\n- You can provide the `?callback=myFunc` param to initiate a JSONp response which will wrap the returned JSON in your callback `function`. The mime type of the response will change from JSON to Javascript.\n- If everything went OK with your request, no error attribute will be set on the response, otherwise, you should see either a string or hash error response within your action\n- To build the response for \"hello\" above, the action would have set `data.response.hello = 'world'` in an action.\n\n## Config Options\n\n`/config/servers/web.js` contains the settings for the web server. The relevant options are:\n\n```ts\nexport const DEFAULT = {\n  servers: {\n    web: (config) =\u003e {\n      return {\n        enabled: true,\n        // HTTP or HTTPS?  This setting is to enable SSL termination directly in the Actionhero app, not set redirection host headers\n        secure: false,\n        // Passed to https.createServer if secure=true. Should contain SSL certificates\n        serverOptions: {},\n        // Should we redirect all traffic to the first host in this array if hte request header doesn't match?\n        // i.e.: [ 'https://www.site.com' ]\n        allowedRequestHosts: process.env.ALLOWED_HOSTS\n          ? process.env.ALLOWED_HOSTS.split(\",\")\n          : [],\n        // Port or Socket Path\n        port: process.env.PORT || 8080,\n        // Which IP to listen on (use '0.0.0.0' for all; '::' for all on ipv4 and ipv6)\n        // Set to `null` when listening to socket\n        bindIP: \"0.0.0.0\",\n        // Any additional headers you want Actionhero to respond with\n        httpHeaders: {\n          \"X-Powered-By\": config.general.serverName,\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\":\n            \"HEAD, GET, POST, PUT, PATCH, DELETE, OPTIONS, TRACE\",\n          \"Access-Control-Allow-Headers\": \"Content-Type\",\n          \"Strict-Transport-Security\": \"max-age=31536000; includeSubDomains\",\n        },\n        // Route that actions will be served from; secondary route against this route will be treated as actions,\n        //  IE: /api/?action=test == /api/test/\n        urlPathForActions: \"api\",\n        // Route that static files will be served from;\n        //  path (relative to your project root) to serve static content from\n        //  set to `null` to disable the file server entirely\n        urlPathForFiles: \"public\",\n        // When visiting the root URL, should visitors see 'api' or 'file'?\n        //  Visitors can always visit /api and /public as normal\n        rootEndpointType: \"file\",\n        // simple routing also adds an 'all' route which matches /api/:action for all actions\n        simpleRouting: true,\n        // queryRouting allows an action to be defined via a URL param, ie: /api?action=:action\n        queryRouting: true,\n        // The cache or (if etags are enabled) next-revalidation time to be returned for all flat files served from /public; defined in seconds\n        flatFileCacheDuration: 60,\n        // Add an etag header to requested flat files which acts as fingerprint that changes when the file is updated;\n        // Client will revalidate the fingerprint at latest after flatFileCacheDuration and reload it if the etag (and therefore the file) changed\n        // or continue to use the cached file if it's still valid\n        enableEtag: true,\n        // should we save the un-parsed HTTP POST/PUT payload to connection.rawConnection.params.rawBody?\n        saveRawBody: false,\n        // How many times should we try to boot the server?\n        // This might happen if the port is in use by another process or the socketfile is claimed\n        bootAttempts: 1,\n        // Settings for determining the id of an http(s) request (browser-fingerprint)\n        fingerprintOptions: {\n          cookieKey: \"sessionID\",\n          toSetCookie: true,\n          onlyStaticElements: false,\n          settings: {\n            path: \"/\",\n            expires: 3600000,\n          },\n        },\n        // Options to be applied to incoming file uploads.\n        //  More options and details at https://github.com/felixge/node-formidable\n        formOptions: {\n          uploadDir: os.tmpdir(),\n          keepExtensions: false,\n          maxFieldsSize: 1024 * 1024 * 20,\n          maxFileSize: 1024 * 1024 * 200,\n        },\n        // Should we pad JSON responses with whitespace to make them more human-readable?\n        // set to null to disable\n        padding: 2,\n        // Options to configure metadata in responses\n        metadataOptions: {\n          serverInformation: true,\n          requesterInformation: true,\n        },\n        // When true, returnErrorCodes will modify the response header for http(s) clients if connection.error is not null.\n        // You can also set connection.rawConnection.responseHttpCode to specify a code per request.\n        returnErrorCodes: true,\n        // should this node server attempt to gzip responses if the client can accept them?\n        // this will slow down the performance of Actionhero, and if you need this functionality, it is recommended that you do this upstream with nginx or your load balancer\n        compress: false,\n        // options to pass to the query parser\n        // learn more about the options @ https://github.com/hapijs/qs\n        queryParseOptions: {},\n      };\n    },\n  },\n};\n```\n\nNote that if you wish to create a secure (https) server, you will be required to complete the serverOptions hash with at least a cert and a keyfile:\n\n```js\nconfig.server.web.serverOptions: {\n  key: fs.readFileSync('certs/server-key.pem'),\n  cert: fs.readFileSync('certs/server-cert.pem')\n}\n```\n\n## The Connection Object\n\n```ts\n{ id: '3e55b464fd34708eba26f609f44481a120e094a8-a6dfb60b-9562-4cc0-9d92-bc6cc1b622ba',\n  connectedAt: 1447554153233,\n  type: 'web',\n  rawConnection:\n   {\n     req: {},\n     res: {},\n     params: { query: {} },\n     method: 'GET',\n     cookies: {},\n     responseHeaders: [ [Object], [Object], [Object], [Object], [Object], [Object] ],\n     responseHttpCode: 200,\n     parsedURL:\n      Url {},\n  remotePort: 57259,\n  remoteIP: '127.0.0.1',\n  error: null,\n  fingerprint: '3e55b464fd34708eba26f609f44481a120e094a8',\n  rooms: [],\n  params: { action: 'randomNumber', apiVersion: 1 },\n  pendingActions: 1,\n  totalActions: 1,\n  messageId: 0,\n  canChat: false,\n  sendMessage: [Function],\n  sendFile: [Function]\n}\n```\n\nwhen inspecting `data.connection` in actions or action middleware from web client, a few additional elements are added for convenience:\n\n- `connection.rawConnection.responseHeaders`: array of headers which can be built up in the action. Headers will be made unique, and latest header will be used (except setting cookies)\n- `connection.rawConnection.method`: A string, GET, POST, etc\n- `connection.rawConnection.cookies`: Hash representation of the connection's cookies\n- `connection.rawConnection.responseHttpCode`: the status code to be rendered to the user. Defaults to 200\n- `connection.type` for a HTTP client is \"web\"\n- `connection.rawConnection.params.body` will contain un-filtered form data\n- `connection.rawConnection.params.files` will contain un-filtered form data\n- `connection.extension`. If are using a route to access an action, and the request path ends in a file extension (IE: `server.com/action/option.jpg`), the extension will be available. Depending on the server's options, this extension may also be used to modify the response mime-type by configuring `matchExtensionMimeType` within each action.\n\n## Sending Files\n\nActionhero can also serve up flat files. Actionhero will not cache these files and each request to `file` will re-read the file from disk (like the nginx web server).\n\nIf the file you want to send is within your `/public` directory you can use:\n\n```ts\nasync run (data) {\n  data.connection.sendFile(\"/path/to/file.mp3\");\n  data.toRender = false;\n}\n```\n\nOtherwise, you'll need to pipe the file and set headers directly:\n\n```ts\nasync run (data) {\n  const file = await File.findOne({where: {id: data.params.fileId}})\n  if (file) {\n    const fileBuffer = await fs.readFile(file.localPath, 'binary')\n    data.connection.rawConnection.res.writeHead(200, {\n      'Content-Disposition': `attachment; filename=${file.name}`,\n      'Content-Type': file.mimeType,\n      'Content-Length': Buffer.byteLength(fileBuffer)\n    })\n    data.connection.rawConnection.res.write(fileBuffer)\n    data.connection.rawConnection.res.end()\n    data.toRender = false\n  } else {\n    throw new Error(`File with id ${data.params.fileId} not found`)\n  }\n}\n```\n\nThere are helpers you can use in your actions to send files:\n\n- `/public` and `/api` are routes which expose the directories of those types. These top level path can be configured in `/config/servers/web.js` with `config.servers.web.urlPathForActions` and `config.servers.web.urlPathForFiles`.\n- the root of the web server \"/\" can be toggled to serve the content between /file or /api actions per your needs `config.servers.web.rootEndpointType`. The default is `api`.\n- Actionhero will serve up flat files (html, images, etc) as well from your ./public folder. This is accomplished via the `file` route as described above. `http://{baseUrl}/public/{pathToFile}` is equivalent to `http://{baseUrl}?action=file\u0026fileName={pathToFile}` and `http://{baseUrl}/file/{pathToFile}`.\n- Errors will result in a 404 (file not found) with a message you can customize.\n- Proper mime-type headers will be set when possible via the `mime` package.\n\nSee the [file server](tutorials/file-server) page for more documentation\n\n## Routes\n\nFor web clients, you can define an optional RESTful mapping to help route requests to actions. If the client doesn't specify an action via a param, and the base route isn't a named action, the action will attempt to be discerned from this `config/routes.js` file.\n\nThis variables in play here are:\n\n- `config.servers.web.urlPathForActions`\n- `config.servers.web.rootEndpointType`\n- and of course the content of `config/routes.js`\n\nSay you have an action called ‘status' (like in a freshly generated Actionhero project). Lets start with Actionhero's default config:\n\n```ts\nconfig.servers.web.urlPathForActions = \"api\";\nconfig.servers.web.urlPathForFiles = \"public\";\nconfig.servers.web.rootEndpointType = \"file\";\n```\n\nThere are 3 ways a client can access actions via the web server.\n\n- no routing at all and use GET params: `server.com/api?action=status`\n- with ‘basic' routing, where the action's name will respond after the /api path: `server.com/api/status`\n- or you can modify this with routes. Say you want `server.com/api/stuff/statusPage`\n\n```ts\nexport const DEFAULT = function(api) {\n  return {\n    get: [\n      { path: ‘/stuff/statusPage', action: 'status' }\n    ]\n  };\n}\n```\n\nIf the `config.servers.web.rootEndpointType` is `\"file\"` which means that the routes you are making are active only under the `/api` path. If you wanted the route example to become `server.com/stuff/statusPage`, you would need to change `config.servers.web.rootEndpointType` to be ‘api'. Note that making this change doesn't stop `server.com/api/stuff/statusPage` from working as well, as you still have `config.servers.web.urlPathForActions` set to be ‘api', so both will continue to work.\n\nFor a route to match, all params must be satisfied. So, if you expect a route to provide `api/:a/:b/:c` and the request is only for `api/:a/:c`, the route won't match. This holds for any variable, including `:apiVersion`. If you want to match both with and without apiVersion, just define the rote 2x, IE:\n\n```ts\nexport const DEFAULT = function (api) {\n  return {\n    all: [\n      { path: \"/cache/:key/:value\", action: \"cacheTest\" },\n      { path: \"/:apiVersion/cache/:key/:value\", action: \"cacheTest\" },\n    ],\n  };\n};\n```\n\nIf you want to shut off access to your action at `server.com/api/stuff/statusPage` and only allow access via `server.com/stuff/statusPage`, you can disable `config.servers.web.urlPathForActions` by setting it equal to `null` (but keeping the `config.servers.web.rootEndpointType` equal to `api`).\n\nRoutes will match the newest version of `apiVersion`. If you want to have a specific route match a specific version of an action, you can provide the `apiVersion` param in your route definitions:\n\n```ts\nexport const DEFAULT = function (api) {\n  return {\n    get: [\n      { path: \"/myAction/old\", action: \"myAction\", apiVersion: 1 },\n      { path: \"/myAction/new\", action: \"myAction\", apiVersion: 2 },\n    ],\n  };\n};\n```\n\nThis would create both `/api/myAction/old` and `/api/myAction/new`, mapping to apiVersion 1 and 2 respectively.\n\nIn your actions and middleware, if a route was matched, you can see the details of the match by inspecting `data.connection.matchedRoute` which will include `path` and `action`.\n\nFinally, you can toggle an option, `matchTrailingPathParts`, which allows the final segment of your route to absorb all trailing path parts in a matched variable.\n\n```ts\npost: [\n  // yes match: site.com/api/123\n  // no match: site.com/api/123/admin\n  { path: '/login/:userId(.*)', action: 'login' }\n],\n\npost: [\n  // yes match: site.com/api/123\n  // yes match: site.com/api/123/admin\n  { path: '/login/:userId(.*)', action: 'login', matchTrailingPathParts: true }\n],\n```\n\nThis also enables \"catch all\" routes, like:\n\n```ts\nget: [\n  { path: ‘:path(.*)', action: ‘catchAll', matchTrailingPathParts: true }\n],\n```\n\nIf you have a route with multiple variables defined and `matchTrailingPathParts` is true, only the final segment will match the trailing sections:\n\n```ts\nget: [\n  // the route site.com/users/123/should/do/a/thing would become {userId: 123, path: ‘/should/do/a/thing'}\n  { path: ‘/users/:userId/:path(.*)', action: ‘catchAll', matchTrailingPathParts: true }\n],\n```\n\n**Note**: In regular expressions used for routing, you cannot use the \"/\" character.\n\n#### Handling Static Folders with Routes\n\nIf you want map a special public folder to a given route you can use the \"dir\" parameter in your \"get\" routes in the routes.js file:\n\n```ts\nget: [\n  { path: ‘/my/special/folder', dir: __dirname + ‘/…/public/my/special/folder', matchTrailingPathParts: true }\n],\n```\n\nAfter mapping this route all files/folders within the mapped folder will be accessible on the route.\n\nYou have to map the specified public folder within the \"dir\" parameter, relative to the routes.js file or absolute. Make sure to set \"matchTrailingPathParts\" to \"true\", because when it is set to false, the route will never match when you request a file. (e.g.: site.com/my/special/folder/testfile.txt).\n\n#### Route Notes\n\n- actions defined in params directly `action=theAction` or hitting the named URL for an action `/api/theAction` will never override RESTful routing\n- you can mix explicitly defined params with route-defined params. If there is an overlap, the route-defined params win\n  - IE: /api/user/123?userId=456 =\u003e `connection.userId = 123`\n- routes defined with the \"all\" method will be duplicated to \"get\", \"put\", \"post\", and \"delete\"\n- use \":variable\" to define \"variable\"\n- an undefined \":variable\" will not match\n  - IE: \"/api/user/\" will not match \"/api/user/:userId\"\n  - You would need a second route in this case to match \"/api/user\"\n- routes are matched as defined top-down in `routes.js`\n- you can optionally define a regex match along with your route variable\n  - IE: `{`path:\"/game/:id(^[a-z]{0,10}\\$)\", action: \"gamehandler\" }`}`\n  - be sure to double-escape when needed: `{` path: \"/login/:userID(^\\\\d{3}\\$)\", action: \"login\" }`}`\n- The HTTP verbs which you can route against are: `api.routes.verbs = ['head', 'get', 'post', 'put', 'patch', 'delete']`\n\n```ts\nexport const DEFAULT = function (api) {\n  return {\n    get: [\n      { path: \"/users\", action: \"usersList\" }, // (GET) /api/users\n      { path: \"/search/:term/limit/:limit/offset/:offset\", action: \"search\" }, // (GET) /api/search/car/limit/10/offset/100\n    ],\n\n    post: [\n      { path: \"/login/:userID(^\\\\d{3}$)\", action: \"login\" }, // (POST) /api/login/123\n    ],\n\n    all: [\n      { path: \"/user/:userID\", action: \"user\" }, // (*) / /api/user/123\n    ],\n  };\n};\n```\n\n## Hosts\n\nActionhero allows you to define a collection of host headers which this API server will allow access from. You can set these via `config.servers.web.allowedRequestHosts`. If the `Host` header of a client does not match one of those listed (protocol counts!), they will be redirected to the first one present.\n\nYou can also set `process.env.ALLOWED_HOSTS` which will be parsed as a comma-separated list of Hosts which will set `config.servers.web.allowedRequestHosts`\n\n## Parameters\n\nParams provided by the user (GET, POST, etc for http and https servers, setParam for TCP clients, and passed to action calls from a web socket client) will be checked against a whitelist defined by your action (can be disabled in `/config/servers/web.js`). Variables defined in your actions by `action.inputs` will be added to your whitelist. Special params which the api will always accept are:\n\n```ts\n[\n  ‘file',\n  ‘apiVersion',\n  ‘callback',\n  ‘action',\n]\n```\n\nParams are loaded in this order GET -\u003e POST (normal) -\u003e POST (multipart). This means that if you have `{url}?key=getValue` and you post a variable `key=postValue` as well, the `postValue` will be the one used. The only exception to this is if you use the URL method of defining your action. You can add arbitrary params to the whitelist by adding them to the `api.postVariables` array in your initializers.\n\nFile uploads from forms will also appear in `connection.params`, but will be an object with more information. That is, if you uploaded a file called \"image\", you would have `connection.params.image.path`, `connection.params.image.name` (original file name), and `connection.params.image.type` available to you.\n\nA note on JSON payloads:\n\nYou can post BODY json payloads to Actionhero in the form of a hash or array.\n\n**Hash**: `curl -X POST -d '{\"key\":\"something\", \"value\":{\"a\":1, \"b\":2}}' http://localhost:8080/api/cacheTest`. This will result in:\n\n```ts\nconnection.params = {\n  key: ‘something',\n  value: {\n    a: 1,\n    b: 2\n  }\n}\n```\n\n**Array**: `curl -X POST -d '[{\"key\":\"something\", \"value\":{\"a\":1, \"b\":2}}]' http://localhost:8080/api/cacheTest`. In this case, we set the array to the param key `payload`:\n\n```ts\nconnection.params = {\n  payload: [\n    {\n      key: 'something'\n      value: {\n        a: 1,\n        b: 2\n      }\n    }\n  ]\n}\n```\n\n### Uploading Files\n\nActionhero uses the [formidable](https://github.com/felixge/node-formidable) form parsing library. You can set options for it via `config.servers.web.formOptions`. You can upload multiple files to an action and they will be available within `connection.params` as formidable response objects containing references to the original file name, where the uploaded file was stored temporarily, etc. Here is an example:\n\n```ts\n// actions/uploader.js\nimport { Action } from \"Actionhero\";\n\nexport class Uploader extends Action {\n  constructor() {\n    super();\n    this.name = \"uploader\";\n    this.description = \"File upload Service\";\n    this.input = {\n      file1: { required: true },\n      file2: { required: false },\n      key1: { required: false },\n      key2: { required: false },\n    };\n  }\n\n  async run(data) {\n    console.log(data);\n  }\n}\n```\n\n```html\n\u003c!-- public/uploader.html --\u003e\n\n\u003chtml\u003e\n  \u003chead\u003e\u003c/head\u003e\n  \u003cbody\u003e\n    \u003cform\n      method=\"post\"\n      enctype=\"multipart/form-data\"\n      action=\"http://localhost:8080/api/uploader\"\n    \u003e\n      \u003cinput type=\"file\" name=\"file1\" /\u003e\n      \u003cinput type=\"file\" name=\"file2\" /\u003e\n      \u003cbr /\u003e\u003cbr /\u003e\n      \u003cinput type=\"text\" name=\"key1\" /\u003e\n      \u003cinput type=\"text\" name=\"key2\" /\u003e\n      \u003cbr /\u003e\u003cbr /\u003e\n      \u003cinput type=\"submit\" value=\"send\" /\u003e\n    \u003c/form\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\n```ts\n// what the params look like to an action\n\n{ action: 'uploader',\n  file1:\n   { domain: null,\n     _events: null,\n     _maxListeners: 10,\n     size: 5477608,\n     path: '/app/Actionhero/tmp/86b2aa018a9785e20b3f6cea95babcca',\n     name: '1-02 Concentration Enhancing Menu Initializer.mp3',\n     type: 'audio/mp3',\n     hash: false,\n     lastModifiedDate: Wed Feb 13 2013 20:32:49 GMT-0800 (PST),\n     _writeStream:\n      { ... },\n     length: [Getter],\n     filename: [Getter],\n     mime: [Getter] },\n  file2:\n   { domain: null,\n     _events: null,\n     _maxListeners: 10,\n     size: 10439802,\n     path: '/app/Actionhero/tmp/6052010f1d75ceaeb9197a9a759124dc',\n     name: '1-10 There She Is.mp3',\n     type: 'audio/mp3',\n     hash: false,\n     lastModifiedDate: Wed Feb 13 2013 20:32:49 GMT-0800 (PST),\n     _writeStream:\n      { ... },\n  key1: '123',\n  key2: '456',\n }\n```\n\n## Client Library\n\nAlthough the `ActionheroWebsocketClient` client-side library is mostly for websockets, it can now be used to make http actions when not connected (and websocket clients will fall back to http actions when disconnected)\n\n```html\n\u003cscript src=\"/public/javascript/ActionheroWebsocketClient.js\"\u003e\u003c/script\u003e\n\n\u003cscript\u003e\n  var client = new ActionheroWebsocketClient();\n  client.action(\"cacheTest\", { key: \"k\", value: \"v\" }, function (error, data) {\n    // do stuff\n  });\n\u003c/script\u003e\n```\n\nNote that we never called `client.connect`. More information can be found on the [websocket server docs page](/docs/servers/websocket).\n","name":"web-server"}},"page":"/tutorials/[name]","query":{"name":"web-server"},"buildId":"Bi8zX94g88TeljxT54m8H","nextExport":true,"isFallback":false,"gip":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-a2ec81a3b359d83082c2.js"></script><script src="/_next/static/chunks/main-34725f5a99cb2b2b6f00.js" async=""></script><script src="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" async=""></script><script src="/_next/static/chunks/commons.94d1ccb9dee116719961.js" async=""></script><script src="/_next/static/chunks/pages/_app-7d0481f4467570ea8ca6.js" async=""></script><script src="/_next/static/chunks/dd05285286c593a0e6da2f584467d9517f5816b2.be19a4f843a12596b98d.js" async=""></script><script src="/_next/static/chunks/27270cb085e17e8e99404fc0284c05b5fb1bb558.1923d1b6e48e3134e628.js" async=""></script><script src="/_next/static/chunks/e75431a1bdcb89b14e100a4a4bb0858c3732af66.b4fa2937edb4092f8c40.js" async=""></script><script src="/_next/static/chunks/pages/tutorials/%5Bname%5D-e4f5bf03c6c5960f3180.js" async=""></script><script src="/_next/static/Bi8zX94g88TeljxT54m8H/_buildManifest.js" async=""></script><script src="/_next/static/Bi8zX94g88TeljxT54m8H/_ssgManifest.js" async=""></script></body></html>