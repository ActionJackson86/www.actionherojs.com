<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Actionhero</title><script src="/static/js/googleAnalytics.js"></script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/chunks/main-34725f5a99cb2b2b6f00.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.94d1ccb9dee116719961.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7d0481f4467570ea8ca6.js" as="script"/><link rel="preload" href="/_next/static/chunks/dd05285286c593a0e6da2f584467d9517f5816b2.be19a4f843a12596b98d.js" as="script"/><link rel="preload" href="/_next/static/chunks/27270cb085e17e8e99404fc0284c05b5fb1bb558.1923d1b6e48e3134e628.js" as="script"/><link rel="preload" href="/_next/static/chunks/e75431a1bdcb89b14e100a4a4bb0858c3732af66.b4fa2937edb4092f8c40.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/tutorials/%5Bname%5D-e4f5bf03c6c5960f3180.js" as="script"/></head><body><div id="__next"><div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><header style="background-color:#2F5266"><div class="container"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:0;border:0" class="navbar navbar-expand-lg navbar-light"><span class="navbar-brand"><a style="padding-top:0;margin-bottom:15px"><img src="/static/images/actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px"/></a></span><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="navbar-collapse collapse" id="basic-navbar-nav"><div class="mr-auto navbar-nav"><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/why" data-rb-event-key="/why" class="nav-link">Why Actionhero?</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/downloads" data-rb-event-key="/downloads" class="nav-link">Downloads</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="/tutorials" data-rb-event-key="/tutorials" class="nav-link">Tutorials</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="https://docs.actionherojs.com" data-rb-event-key="https://docs.actionherojs.com" class="nav-link">Docs</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="plugins" data-rb-event-key="plugins" class="nav-link">Plugins</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="community" data-rb-event-key="community" class="nav-link">Community</a><a style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300;border-bottom:none;margin-right:20px" href="https://actionherojs.threadless.com" data-rb-event-key="https://actionherojs.threadless.com" class="nav-link">Shop</a></div><div class="d-none d-xl-block navbar-nav"><div class="d-none d-lg-block"><a style="text-decoration:none" href="/get-started"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;font-weight:300;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Get Started</button></a></div></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px"><div class="container"><div class="row"><div style="text-align:center" class="col-md-3"><img src="/static/images/documentation.svg"/></div><div style="text-align:center" class="col-md-6"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><br/>Upgrade-path</h1></div><div class="col-md-3"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4"></div><div style="padding-bottom:100px" class="container"><div class="row"><div id="_top"></div><div id="docPageContent" class="col-md-12"><div id="tutorialPageContent" class="row"><div class="col-md-9"><div><div id="Overview"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Overview</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Upgrading big Actionhero projects to a new major might require some effort. Every Actionhero version has it&#x27;s own specific project files which you generate using <code>Actionhero generate</code> command.</p><p>One of the ways to upgrade your project is to generate a new project using the latest Actionhero framework (<code>npx Actionhero generate</code>). Using that as your starting point you can then carefully copy all your <code>configs</code>, <code>initializers</code>, <code>servers</code>, <code>tasks</code>, <code>actions</code>, and other custom code from your old project, making sure that you are at the same working state as before. It&#x27;s a good practice to make tests for your actions (or any other component) before you plan to upgrade your Actionhero project.</p><p>With good <a href="tutorial-testing.html">test coverage</a> you can make sure that you have successfully upgraded your project.</p><p>Actionhero follows <a href="http://semver.org/">semantic versioning</a>. This means that a minor change is a right-most number. A new feature added is the middle number, and a breaking change is the left number. You should expect something in your application to need to be changed if you upgrade a major version.</p><div><div id="Upgrading from v22 to v23"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v22 to v23</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>This release is breaking for 2 reasons:</p><ol><li>The logger format for Action and Task errors has changed <a href="https://github.com/actionhero/actionhero/pull/1505">Pull Request</a>.</li><li>The <code>Documentation</code> initializer and related <code>showDocumentation</code> action has been removed in favor of the new swagger action &amp; middleware <a href="https://github.com/actionhero/actionhero/pull/1474">Pull Request</a>.</li></ol><p>If you use automated log ingestion (i.e.: Splunk or a Winston logger) this PR should be helpful, as the error and stack trace will now all be on the same line... but you will need to update your log tools.</p><p>If you had been using the <code>Documentation</code> initializer, you can re-build it yourself from <code>api.actions.actions</code>. If you want upgrade your Actionhero project to use the new Swagger documentation tooling, you need to copy in 2 files:</p><ul><li>The Swagger public page - <a href="https://github.com/actionhero/actionhero/blob/master/public/swagger.html">swagger.html</a></li><li>The Swagger Action - <a href="https://github.com/actionhero/actionhero/blob/master/src/actions/swagger.ts">swagger.ts</a></li></ul><p>There are also new logging options to add to <code>src/config/api.ts</code>:</p><ul><li><code>config.general.enableResponseLogging</code> (bool) toggles this option on (off by default)</li><li><code>config.general. filteredResponse</code> (string[]) allow you to filter out certain parts of the response payload from the logs, hiding sensitive data.</li></ul><div><div id="Upgrading from v21 to v22"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v21 to v22</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Assuming that you have already migrated your project to <a href="/tutorials/typescript">Typescript</a>, the only change is create your <code>server.ts</code> and change your <code>package.json</code> scripts to use it. Support for <code>boot.js</code> has also been removed, and you should move that logic into your new <code>server.ts</code></p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// in ./src/server.ts</span><span>
</span><span></span><span style="color:#954121">import</span><span> { Process } </span><span style="color:#954121">from</span><span> </span><span style="color:#219161">&quot;actionhero&quot;</span><span>;
</span>
<span></span><span style="color:#408080;font-style:italic">// load any custom code, configure the env, as needed</span><span>
</span>
<span></span><span style="color:#954121">async</span><span> </span><span class="hljs-function" style="color:#954121">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#458;font-weight:bold">main</span><span class="hljs-function">(</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#408080;font-style:italic">// create a new actionhero process</span><span>
</span><span>  </span><span style="color:#954121">const</span><span> app = </span><span style="color:#954121">new</span><span> Process();
</span>
<span>  </span><span style="color:#408080;font-style:italic">// handle unix signals and uncaught exceptions &amp; rejections</span><span>
</span>  app.registerProcessSignals();
<!-- -->
<span>  </span><span style="color:#408080;font-style:italic">// start the app!</span><span>
</span><span>  </span><span style="color:#408080;font-style:italic">// you can pass custom configuration to the process as needed</span><span>
</span><span>  </span><span style="color:#954121">await</span><span> app.start();
</span>}
<!-- -->
<!-- -->main();
</code></pre><p>Your package json should now contain:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>  </span><span style="color:#219161">&quot;scripts&quot;</span><span>: {
</span><span>    </span><span class="hljs-attr">&quot;postinstall&quot;</span><span>: </span><span style="color:#219161">&quot;npm run build&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;dev&quot;</span><span>: </span><span style="color:#219161">&quot;ts-node-dev --no-deps --transpile-only ./src/server.ts&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;start&quot;</span><span>: </span><span style="color:#219161">&quot;node ./dist/server.js&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;test&quot;</span><span>: </span><span style="color:#219161">&quot;jest&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;pretest&quot;</span><span>: </span><span style="color:#219161">&quot;npm run build &amp;&amp; npm run lint&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;build&quot;</span><span>: </span><span style="color:#219161">&quot;tsc --declaration&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;lint&quot;</span><span>: </span><span style="color:#219161">&quot;prettier --check src/*/** __test__/*/**&quot;</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;pretty&quot;</span><span>: </span><span style="color:#219161">&quot;prettier --write src/*/** __test__/*/**&quot;</span><span>
</span>  },
</code></pre><p>Also be sure that your <code>packate.json</code> contains the <code>@types/ioreids</code> devDependency. You can install it with <code>npm install --save-dev @types/ioredis</code></p><p>Tasks can now use <a href="https://www.actionherojs.com/tutorials/tasks#Task%20Inputs">input validation</a>.</p><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v22.0.0">GitHub</a></strong></p><div><div id="Upgrading from v20 to v21"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v20 to v21</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>The recommended upgrade to v21 of Actionhero is to move your project to Typescript.
Detailed notes can be found on the <a href="/tutorials/typescript">Typescript Tutorial</a>.</p><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v21.0.9">GitHub</a></strong></p><div><div id="Upgrading from v19 to v20"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v19 to v20</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v20.0.0">GitHub</a></strong></p><p>The only change to take note of is that you must now ensure that the working directory (CWD/PWD) in use when you start your Actionhero project is the root. (where /config, /actions, etc) are visible.</p><div><div id="Upgrading from v18 to v19"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v18 to v19</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v19.0.0">GitHub</a></strong></p><p><strong>Configuration</strong></p><ul><li>in <code>config/tasks.js</code> <code>add config.tasks.stuckWorkerTimeout = 3600000</code>. This will be a 1 hour timeout for stuck/crashed worker processes</li><li>in <code>config/servers/websocket.js</code> <code>add config.servers.websocket.client.cookieKey = config.servers.web.fingerprintOptions.cookieKey</code>. This will instruct the Actionhero Websocket Clients to share the same cookie as the web server to share a fingerprint, which can be used to share session information.</li><li>If you plan to use Jest for your tests, and want to test in parallel, you will need to configure your server in the test environment to make use of <code>process.env.JEST_WORKER_ID</code>. Please view <a href="https://github.com/actionhero/actionhero/blob/master/config/api.js"><code>config/api.js</code></a>, <a href="https://github.com/actionhero/actionhero/blob/master/config/redis.js"><code>config/redis.js</code></a>, <a href="https://github.com/actionhero/actionhero/blob/master/config/servers/socket.js"><code>config/servers/socket.js</code></a>, and <a href="https://github.com/actionhero/actionhero/blob/master/config/servers/web.js"><code>config/servers/web.js</code></a> for more information</li></ul><div><div id="Upgrading from v19 to v20"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v19 to v20</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/actionhero/actionhero/releases/tag/v20.0.0">GitHub</a></strong></p><ul><li>In <code>config/api.js</code> add <code>config.general.paths.test = [path.join(__dirname, &#x27;/../__tests__&#x27;)]</code> so that when you generate a new action or task, the related test file can be generated as well.</li><li>However you run Actionhero, be sure to <code>cd</code> into the root directory of the project before starting the server.</li></ul><div><div id="Upgrading from v19 to v20"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v19 to v20</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/actionhero/actionhero/releases/tag/v19.0.0">GitHub</a></strong></p><ul><li>in <code>config/tasks.js</code> <code>add config.tasks.stuckWorkerTimeout = 3600000</code>. This will be a 1 hour timeout for stuck/crashed worker processes</li><li>in <code>config/servers/websocket.js</code> <code>add config.servers.websocket.client.cookieKey = config.servers.web.fingerprintOptions.cookieKey</code>. This will instruct the Actionhero Websocket Clients to share the same cookie as the web server to share a fingerprint, which can be used to share session information.</li><li>If you plan to use Jest for your tests, and want to test in parallel, you will need to configure your server in the test environment to make use of <code>process.env.JEST_WORKER_ID</code>. Please view <a href="https://github.com/actionhero/actionhero/blob/master/config/api.js"><code>config/api.js</code></a>, <a href="https://github.com/actionhero/actionhero/blob/master/config/redis.js"><code>config/redis.js</code></a>, <a href="https://github.com/actionhero/actionhero/blob/master/config/servers/socket.js"><code>config/servers/socket.js</code></a>, and <a href="https://github.com/actionhero/actionhero/blob/master/config/servers/web.js"><code>config/servers/web.js</code></a> for more information</li></ul><div><div id="Upgrading from v17 to v18"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v17 to v18</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/actionhero/actionhero/releases/tag/v18.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><p>There are <em>many</em> changes to the APIs Actionhero exposes. You can read up on the new syntax on our <a href="https://docs.actionherojs.com">new documentation website, docs.actionherojs.com</a></p><ul><li><p><strong>Node.js version</strong></p><ul><li>Node.js v8 and higher is now required. You must update your projects.</li></ul></li><li><p><strong>Actions</strong></p><ul><li>Actions are now ES6 classes, which extend <code>require(&#x27;Actionhero&#x27;).Action</code>.</li><li>The <code>run</code> method only has one argument now, <code>data</code> and becomes a <code>async</code> method. <code>api</code> can be required globally to your file.</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>const { </span><span style="color:#19469d">Action</span><span>, api } = require(</span><span style="color:#219161">&quot;actionhero&quot;</span><span>);
</span>
<span>module.exports = </span><span class="hljs-class" style="color:#954121">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">MyAction</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#954121">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">Action</span><span class="hljs-class"> </span><span>{
</span>  constructor() {
<span>    </span><span style="color:#954121">super</span><span>();
</span><span>    </span><span style="color:#954121">this</span><span>.name = </span><span style="color:#219161">&quot;randomNumber&quot;</span><span>;
</span><span>    </span><span style="color:#954121">this</span><span>.description = </span><span style="color:#219161">&quot;I am an API method which will generate a random number&quot;</span><span>;
</span><span>    </span><span style="color:#954121">this</span><span>.outputExample = { randomNumber: </span><span style="color:#40a070">0.1234</span><span> };
</span>  }
<!-- -->
<!-- -->  async run(data) {
<span>    data.response.randomNumber = </span><span style="color:#19469d">Math</span><span>.random();
</span>  }
<!-- -->};
</code></pre><ul><li><strong>Tasks</strong><ul><li>Tasks are now ES6 classes, which extend <code>require(&#x27;Actionhero&#x27;).Task</code>.</li><li>The <code>run</code> method only has one argument now, <code>data</code> and becomes a <code>async</code> method. <code>api</code> can be required globally to your file.</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>const { api, Task } = require(&quot;actionhero&quot;)</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<span></span><span class="hljs-attr">module.exports</span><span> = class SendWelcomeMessage extends Task {
</span>  constructor() {
<span>    super()</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    </span><span class="hljs-attr">this.name</span><span> = </span><span style="color:#219161">&quot;SendWelcomeEmail&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    </span><span class="hljs-attr">this.description</span><span> = </span><span style="color:#219161">&quot;I send the welcome email to new users&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    </span><span class="hljs-attr">this.frequency</span><span> = </span><span style="color:#40a070">0</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    </span><span class="hljs-attr">this.queue</span><span> = </span><span style="color:#219161">&quot;high&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    </span><span class="hljs-attr">this.middleware</span><span> = []</span><span style="color:#408080;font-style:italic">;</span><span>
</span>  }
<!-- -->
<!-- -->  async run(data) {
<span>    await api.sendWelcomeEmail({ address: data.email })</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    return true</span><span style="color:#408080;font-style:italic">;</span><span>
</span>  }
<span>}</span><span style="color:#408080;font-style:italic">;</span></code></pre><ul><li><strong>Initializers</strong><ul><li>Initializers are now ES6 classes, which extend <code>require(&#x27;actionhero&#x27;).Initializer</code>.</li><li>The <code>initialize</code>, <code>start</code>, and <code>stop</code> methods now have no arguments and become a <code>async</code> methods. <code>api</code> can be required globally to your file.</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#954121">const</span><span> { Actionhero, api } = </span><span style="color:#0086b3">require</span><span>(</span><span style="color:#219161">&quot;actionhero&quot;</span><span>);
</span>
<span></span><span style="color:#0086b3">module</span><span>.</span><span style="color:#0086b3">exports</span><span> = </span><span class="hljs-class" style="color:#954121">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">StuffInit</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#954121">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#458;font-weight:bold">Actionhero</span><span class="hljs-class">.</span><span class="hljs-class" style="color:#458;font-weight:bold">Initializer</span><span class="hljs-class"> {</span><span>
</span>  constructor() {
<span>    </span><span style="color:#0086b3">super</span><span>();
</span><span>    </span><span style="color:#0086b3">this</span><span>.name = </span><span style="color:#219161">&quot;StuffInit&quot;</span><span>;
</span><span>    </span><span style="color:#0086b3">this</span><span>.loadPriority = </span><span style="color:#40a070">1000</span><span>;
</span><span>    </span><span style="color:#0086b3">this</span><span>.startPriority = </span><span style="color:#40a070">1000</span><span>;
</span><span>    </span><span style="color:#0086b3">this</span><span>.stopPriority = </span><span style="color:#40a070">1000</span><span>;
</span>  }
<!-- -->
<span>  </span><span style="color:#954121">async</span><span> initialize() {
</span>    api.StuffInit = {};
<span>    api.StuffInit.doAThing = </span><span style="color:#954121">async</span><span> () =&gt; {};
</span><span>    api.StuffInit.stopStuff = </span><span style="color:#954121">async</span><span> () =&gt; {};
</span><span>    api.log(</span><span style="color:#219161">&quot;I initialized&quot;</span><span>, </span><span style="color:#219161">&quot;debug&quot;</span><span>, </span><span style="color:#0086b3">this</span><span>.name);
</span>  }
<!-- -->
<span>  </span><span style="color:#954121">async</span><span> start() {
</span><span>    </span><span style="color:#954121">await</span><span> api.StuffInit.startStuff();
</span><span>    api.log(</span><span style="color:#219161">&quot;I started&quot;</span><span>, </span><span style="color:#219161">&quot;debug&quot;</span><span>, </span><span style="color:#0086b3">this</span><span>.name);
</span>  }
<!-- -->
<span>  </span><span style="color:#954121">async</span><span> stop() {
</span><span>    </span><span style="color:#954121">await</span><span> api.StuffInit.stopStuff();
</span><span>    api.log(</span><span style="color:#219161">&quot;I stopped&quot;</span><span>, </span><span style="color:#219161">&quot;debug&quot;</span><span>, </span><span style="color:#0086b3">this</span><span>.name);
</span>  }
<!-- -->};
</code></pre><ul><li><strong>Servers</strong><ul><li>Servers are now ES6 classes, which extend <code>require(&#x27;Actionhero&#x27;).Server</code>.</li><li>The <code>initialize</code>, <code>start</code>, and <code>stop</code> methods now have no arguments and become a <code>async</code> methods. <code>api</code> can be required globally to your file.</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>const Actionhero = require(</span><span style="color:#219161">&quot;Actionhero&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<!-- -->module.exports = class MyServer extends Actionhero.Server {
<!-- -->  constructor() {
<span>    super()</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    this.type = </span><span style="color:#219161">&quot;%%name%%&quot;</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<!-- -->    this.attributes = {
<span>      canChat: </span><span style="color:#954121">false</span><span>,
</span><span>      logConnections: </span><span style="color:#954121">true</span><span>,
</span><span>      logExits: </span><span style="color:#954121">true</span><span>,
</span><span>      sendWelcomeMessage: </span><span style="color:#954121">false</span><span>,
</span>      verbs: [],
<span>    }</span><span style="color:#408080;font-style:italic">;</span><span>
</span>    // this.config will be set to equal config.servers[this.type]
<!-- -->  }
<!-- -->
<!-- -->  initialize() {
<span>    this.on(</span><span style="color:#219161">&quot;connection&quot;</span><span>, (</span><span style="color:#000080;font-weight:normal">connection</span><span>) =&gt; {})</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<span>    this.on(</span><span style="color:#219161">&quot;actionComplete&quot;</span><span>, (</span><span style="color:#000080;font-weight:normal">data</span><span>) =&gt; {})</span><span style="color:#408080;font-style:italic">;</span><span>
</span>  }
<!-- -->
<!-- -->  start() {
<span>    // this.buildConnection (</span><span style="color:#000080;font-weight:normal">data</span><span>)
</span><span>    // this.processAction (</span><span style="color:#000080;font-weight:normal">connection</span><span>)
</span><span>    // this.processFile (</span><span style="color:#000080;font-weight:normal">connection</span><span>)
</span>  }
<!-- -->
<!-- -->  stop() {}
<!-- -->
<span>  sendMessage(</span><span style="color:#000080;font-weight:normal">connection</span><span>, message, messageId) {}
</span>
<span>  sendFile(</span><span style="color:#000080;font-weight:normal">connection</span><span>, error, fileStream, mime, length, lastModified) {}
</span>
<span>  goodbye(</span><span style="color:#000080;font-weight:normal">connection</span><span>) {}
</span><span>}</span><span style="color:#408080;font-style:italic">;</span></code></pre><ul><li><strong>CLI Commands</strong><ul><li>CLI Commands are now ES6 classes, which extend <code>require(&#x27;Actionhero&#x27;).CLI</code>.</li><li>The <code>run</code> method now has one argument, <code>data</code> and becomes a <code>async</code> method. <code>api</code> can be required globally to your file.</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>const {api, CLI} = require(</span><span style="color:#990073">&#x27;Actionhero</span><span>&#x27;)
</span>
<!-- -->module.exports = class RedisKeys extends CLI {
<!-- -->  constructor () {
<!-- -->    super()
<span>    this.name = </span><span style="color:#990073">&#x27;redis</span><span> keys&#x27;
</span><span>    this.description = </span><span style="color:#990073">&#x27;I</span><span> list all the keys in redis&#x27;
</span><span>    this.example = </span><span style="color:#990073">&#x27;Actionhero</span><span> keys --prefix Actionhero&#x27;
</span>  }
<!-- -->
<!-- -->  inputs () {
<!-- -->    return {
<!-- -->      prefix: {
<!-- -->        required: true,
<span>        default: </span><span style="color:#990073">&#x27;Actionhero</span><span>&#x27;,
</span><span>        note: </span><span style="color:#990073">&#x27;the</span><span> redis prefix for searching keys&#x27;
</span>      }
<!-- -->    }
<!-- -->  }
<!-- -->
<!-- -->  async run ({params}) =&gt; {
<span>    let keys = await api.redis.clients.client.keys(</span><span style="color:#000080;font-weight:normal">params.prefix</span><span>)
</span><span>    api.log(</span><span style="color:#990073">&#x27;Found</span><span> &#x27; + keys.length + </span><span style="color:#990073">&#x27;keys:</span><span>&#x27;)
</span><span>    keys.forEach((</span><span style="color:#000080;font-weight:normal">k</span><span>) =&gt; { api.log(</span><span style="color:#000080;font-weight:normal">k</span><span>) })
</span>  }
<!-- -->}
</code></pre><ul><li><p><strong>Cache</strong></p><ul><li>All methods which used to return a callback are now <code>async</code> methods which, when <code>await</code>ed, return a result and <code>throw</code> errors</li></ul></li><li><p><strong>Tasks</strong></p><ul><li>All methods which used to return a callback are now <code>async</code> methods which, when <code>await</code>ed, return a result and <code>throw</code> errors</li></ul></li><li><p><strong>Chat</strong></p><ul><li>All methods which used to return a callback are now <code>async</code> methods which, when <code>await</code>ed, return a result and <code>throw</code> errors</li></ul></li><li><p><strong>SpecHelper</strong></p><ul><li>All methods which used to return a callback are now <code>async</code> methods which, when <code>await</code>ed, return a result and <code>throw</code> errors</li></ul></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>const chai = require(</span><span style="color:#219161">&quot;chai&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>const dirtyChai = require(</span><span style="color:#219161">&quot;dirty-chai&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>const expect = chai.expect</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>chai.use(</span><span style="color:#000080;font-weight:normal">dirtyChai</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<span>const path = require(</span><span style="color:#219161">&quot;path&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>const Actionhero = require(</span><span style="color:#219161">&quot;Actionhero&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>const Actionhero = new Actionhero.Process()</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>let api</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<span>describe(</span><span style="color:#219161">&quot;Action: RandomNumber&quot;</span><span>, () =&gt; {
</span><span>  before(</span><span style="color:#000080;font-weight:normal">async</span><span> () =&gt; {
</span><span>    api = await Actionhero.start()</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>  })</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>  after(</span><span style="color:#000080;font-weight:normal">async</span><span> () =&gt; {
</span><span>    await Actionhero.stop()</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>  })</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<!-- -->  let firstNumber = null;
<span>  it(</span><span style="color:#219161">&quot;generates random numbers&quot;</span><span>, async () =&gt; {
</span><span>    let { randomNumber } = await api.specHelper.runAction(</span><span style="color:#219161">&quot;randomNumber&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    expect(</span><span style="color:#000080;font-weight:normal">randomNumber</span><span>).to.be.at.least(</span><span style="color:#40a070">0</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    expect(</span><span style="color:#000080;font-weight:normal">randomNumber</span><span>).to.be.at.most(</span><span style="color:#40a070">1</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span>    firstNumber = randomNumber;
<span>  })</span><span style="color:#408080;font-style:italic">;</span><span>
</span>
<span>  it(</span><span style="color:#219161">&quot;is unique / random&quot;</span><span>, async () =&gt; {
</span><span>    let { randomNumber } = await api.specHelper.runAction(</span><span style="color:#219161">&quot;randomNumber&quot;</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    expect(</span><span style="color:#000080;font-weight:normal">randomNumber</span><span>).to.be.at.least(</span><span style="color:#40a070">0</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    expect(</span><span style="color:#000080;font-weight:normal">randomNumber</span><span>).to.be.at.most(</span><span style="color:#40a070">1</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>    expect(</span><span style="color:#000080;font-weight:normal">randomNumber</span><span>).not.to.equal(</span><span style="color:#000080;font-weight:normal">firstNumber</span><span>)</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>  })</span><span style="color:#408080;font-style:italic">;</span><span>
</span><span>})</span><span style="color:#408080;font-style:italic">;</span></code></pre><ul><li><p><strong>Utils</strong></p><ul><li><code>api.utils.recursiveDirectoryGlob</code> has been removed in favor of the <a href="https://github.com/isaacs/node-glob">glob package</a>. Use this instead.</li><li>All methods which used to return a callback are now <code>async</code> methods which, when <code>await</code>ed, return a result and <code>throw</code> errors</li></ul></li><li><p><strong>Plugins</strong></p><ul><li>Actionhero no longer uses linkfiles to find plugins. If you have any in a <code>plugins</code> directory in your actions, tasks, config, or public folders, delete them.</li><li>Plugins now need to be defined explicitly in a new <code>./config/plugins.js</code> config file. You should create one <a href="https://github.com/Actionhero/Actionhero/blob/master/config/plugins.js">per the example</a></li><li>Removed <code>Actionhero link</code> and <code>Actionhero unlink</code> per the above.</li><li>Added <code>Actionhero generate plugin</code>, a helper which you can use in an empty directory which will create a template plugin project</li><li>Testing plugins is now simpler. <a href="https://docs.actionherojs.com/tutorial-plugins.html">Read more about this on docs.actionherojs.com</a></li></ul></li><li><p><strong>Clients</strong></p><ul><li><code>ActionheroClient</code> (the included client library for browser websocket clients) as been named a more clear <code>ActionheroWebsocketClient</code> to avoid ambiguity.</li><li>The node sever-sever package has been renamed <code>Actionhero-node-client</code> to help clear up any confusion.</li></ul></li></ul><div><div id="Upgrading from v16 to v17"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v16 to v17</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v17.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><ul><li><p><strong>Localization (i18n)</strong></p></li><li><p>In <code>./config/i18n.js</code> be sure to enable <code>objectNotation</code>, or else the new locale file will be gibberish to Actionhero</p></li><li><p>As of this release, Actionhero no longer localizes its log messages. This is done to simplify and speed up the logger methods. There is not mitigation path here without overwriting the <code>api.log()</code> method.</p></li><li><p>Any use of <code>%</code> interpolation should be removed from your logger strings. Favor native JS string templates.</p></li><li><p>Actionhero now ships with locale files by default.</p></li><li><p>You will need to acquire the <a href="https://github.com/Actionhero/Actionhero/blob/master/locales/en.json">default locale file</a> and copy it into <code>./locales/en.json</code> within your project.</p></li><li>The error reporters have all been changed to use these new locale file and mustache-style syntax. Update your from the <a href="https://github.com/Actionhero/Actionhero/blob/master/config/errors.js">default errors file</a></li><li><p>The <code>welcomeMessage</code> and <code>goodbyeMessage</code> are removed from the config files and Actionhero now references the locale files for these strings. Update yours accordingly.</p></li><li><p><strong>utils</strong></p></li><li><p><code>api.utils.recursiveDirectoryGlob</code> has been removed in favor of the <a href="https://github.com/isaacs/node-glob">glob package</a>. Use this instead.</p></li></ul><div><div id="Upgrading from v15 to v16"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v15 to v16</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v16.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><p>The only breaking changes are related to the capilization of internal methods:</p><ul><li><code>api.Connection()</code> rather than <code>api.connection()</code></li><li><code>api.GenericServer()</code> rather than <code>api.genericServer()</code></li><li><code>api.ActionProcessor()</code> rather than <code>api.actionProcessor()</code></li><li><code>require(&#x27;Actionhero&#x27;)</code> not <code>require(&#x27;Actionhero&#x27;).actionheroPrototype</code> should you be using Actionhero programmatically.</li></ul><div><div id="Upgrading from v14 to v15"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v14 to v15</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v15.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span>\`Actionhero generateAction --name=[name]\`      -&gt; \`Actionhero generate action --name=[name]\`
</span>\`Actionhero generateInitializer --name=[name]\` -&gt; \`Actionhero generate initializer --name=[name]\`
<!-- -->\`Actionhero generateServer --name=[name]\`      -&gt; \`Actionhero generate server --name=[name]\`
<!-- -->\`Actionhero generateTask --name=[name]\`        -&gt; \`Actionhero generate task --name=[name]\`
</code></pre><ul><li>The Actionhero binary has had it&#x27;s commands changed.<ul><li>Any deployment or automation tools you use will need to be updated accordingly.</li></ul></li><li>Tasks now use middleware instead of plugins.<ul><li>You will need to convert all uses of task plugins to task middleware.</li></ul></li></ul><div><div id="Upgrading from v13 to v14"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v13 to v14</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v14.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><ul><li>Redis Client Configurations have changed drastically. This allows for greater configuration, but at a complexity cost.<ul><li>The easiest way to upgrade your <code>config/redis.js</code> is to take if from the <a href="https://github.com/Actionhero/Actionhero/blob/master/config/redis.js">master branch</a> directly and re-apply your configuration.</li><li>Move <code>config.redis.channel</code> to <code>config.general.channel</code></li><li>Move <code>config.redis. rpcTimeout</code> to <code>config.general.rpcTimeout</code></li><li>Throughout the code, use <code>config.redis.client</code> rather than <code>api.redis.client</code></li></ul></li></ul><div><div id="Upgrading from v12 to v13"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v12 to v13</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v13.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><ul><li>Plugins<ul><li><code>config/plugins.js</code> is removed. Delete yours.</li><li>Use the new binary command, <code>Actionhero link --name=NameOfPlugin</code> to link your plugins in the new method.</li><li>Linking plugins will likely create new config files you may need to customize.</li></ul></li><li>Locales<ul><li>This release introduced Locales. You will need the new locale config file. The easiest way to upgrade your <code>config/i18n.js</code> is to take if from the <a href="https://github.com/Actionhero/Actionhero/blob/master/config/i18n.js">master branch</a>.</li><li>Ensure that <code>config.i18n.updateFiles</code> is <code>true</code> so that your locale files can be generated for the first time.</li></ul></li><li>Errors<ul><li><code>config/errors.js</code> has been completely redone to take advantage of <code>connection.localize</code>. The easiest way to upgrade your <code>config/errors.js</code> is to take if from the <a href="https://github.com/Actionhero/Actionhero/blob/master/config/errors.js">master branch</a>.</li></ul></li><li>Grunt Removed<ul><li>Grunt is removed from the project. The old Actionhero grunt commands have been moved into the Actionhero binary.</li></ul></li><li>Redis configuration<ul><li><code>package</code> is a reserved keyword in JavaScript. We now use the key <code>pkg</code> in the redis config.</li></ul></li></ul><div><div id="Upgrading from v11 to v12"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v11 to v12</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v12.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><ul><li>Redis configuration<ul><li>Switch from using the <code>redis</code> npm package to <code>ioredis</code>. Change this in your package.json.</li></ul></li><li><code>ioredis</code> handles passwords slightly differently. Read the <a href="https://github.com/luin/ioredis">ioredis</a> documentation to learn more.</li><li>Stats Removed<ul><li>The <code>api.stats</code> subsection has been removed from Actionhero</li><li>If you need the stats subsection, you can get get it <a href="https://github.com/Actionhero/ah-stats-plugin">via plugin</a></li></ul></li></ul><div><div id="Upgrading from v10 to v11"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Upgrading from v10 to v11</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p><strong>Full Release Notes: <a href="https://github.com/Actionhero/Actionhero/releases/tag/v11.0.0">GitHub</a></strong></p><p><strong>Breaking Changes and How to Overcome Them:</strong></p><ul><li>Action Syntax changed<ul><li><code>run: function(api, data, next){ data.response.randomNumber = Math.random(); next(error); }</code></li><li>Where data contains:</li><li><code>data = { connection: connection, action: &#x27;randomNumber&#x27;, toProcess: true, toRender: true, messageId: 123, params: { action: &#x27;randomNumber&#x27;, apiVersion: 1 }, actionStartTime: 123, response: {}, }</code></li><li>You will need to change all of your actions to use <code>data.connection</code> rather than <code>connection</code> directly.</li><li>You will need to change all of your actions to use <code>data.response</code> rather than <code>connection.response</code> directly.</li></ul></li><li>Middleware syntax has changed to match action&#x27;s <code>data</code> pattern. You will need to change your middleware accordingly.</li><li>Removed <code>connection._originalConnection</code>.</li><li>Websockets:<ul><li>The params of websocket connections should NOT be sticky. All actions will start with <code>connection.params = {}</code>. If you rely on the old behavior, you will need to change your client code.</li></ul></li><li>Action Processor:<ul><li>Removed duplicate callback prevention in ActionProcessor. This belongs on the user/implementer to handle.</li></ul></li></ul></div><div class="d-none d-md-block col-md-3"><div style="height:0"><div style="padding-top:90px;position:sticky;top:0"><ul style="list-style-type:none;padding-left:0;margin-left:0"></ul></div></div></div></div><br/><div><a style="text-decoration:none" href="/tutorials"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Back to Tutorials</button></a></div></div><div class="d-none d-md-block col-md-3"></div></div></div><div style="background-color:#6E8898;color:#2F5266;font-weight:300;padding-top:100px;padding-bottom:100px"><div class="container"><div class="row"><div class="col-md-2"></div><div style="text-align:center;color:#FBF9E4;padding-bottom:100px" class="col-md-8"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Solutions</h1><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="color:#FBF9E4">Actionhero was built from the ground up to include all the features you expect from a modern API framework.</span></h2></div><div class="col-md-2"></div></div><div class="row"><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-left:40px;padding-right:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Open Source</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>The Actionhero server is open source, under the Apache-2 license</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>Actionhero runs on Linux, OS X, and Windows</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>You always have access to the Actionhero team via<!-- --> <a href="/community">Slack and Github</a></p><br/><br/><div><a style="text-decoration:none" href="/downloads"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Download</button></a></div></div></div><div class="d-lg-none col-md-4"><div style="width:100%;padding:20px;background-color:#2F5266;color:#FFFFFF;box-shadow:0px 2px 4px #003C51"><div style="text-align:center"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><span style="color:#FBF9E4">Premium Training &amp; Review</span></h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Audits</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div><div class="d-none d-lg-block col-md-4"><div style="width:125%;padding:40px;background-color:#2F5266;color:#FFFFFF;position:relative;top:-60px;box-shadow:0px 2px 4px #003C51;margin-left:-13%;margin-right:-5%;z-index:10"><div style="text-align:center;padding-bottom:10px"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Premium Training &amp; Review</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Workshops</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-right:40px;padding-left:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Enterprise</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>For larger customers in need of a support contract, we offer an enterprise plan including everything in the Premium plan plus:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>24/7 access to core members of the Actionhero Team</strong></li><li><strong>Emergency response packages</strong></li><li><strong>Deployment support</strong></li><li><strong>...and custom development against Actionheros core as needed.</strong></li></ul><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-primary btn-block btn-lg">Contact Us</button></div></div></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200"><div class="container"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px" class="row"><div class="col-md-12"><img src="/static/images/actionhero-logo-header-wordmark.svg"/></div></div><div style="padding-bottom:100px" class="row"><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/terms">Terms</a></p><p>Contact us at<!-- --> <a style="color:#FBF9E4;font-weight:500" href="mailto:hello@actionherojs.com">hello@actionherojs.com</a></p><p>You can contribute to this website<!-- --> <a style="color:#FBF9E4;font-weight:500" href="https://github.com/actionhero/www.actionherojs.com" target="_blank">here</a>.</p><p><a href="https://medium.com/tag/actionherojs/latest" target="_new" style="color:#FBF9E4">Blogs</a></p><p style="color:#FFFFFF;font-weight:bold"> 2020<!-- --> <!-- -->Actionhero</p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/why">Why Actionhero</a></p><p><a style="color:#FBF9E4" href="/get-started">Get Started</a></p><p><a style="color:#FBF9E4" href="/key-concepts">Key Concepts</a></p><p><a href="https://docs.actionherojs.com" style="color:#FBF9E4">Documenation</a></p><p><a style="color:#FBF9E4" href="/solutions">Solutions</a></p><p><a style="color:#FBF9E4" href="/community">Community</a></p><p><a style="color:#FBF9E4" href="/downloads">Downloads</a></p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a href="https://www.npmjs.com/package/actionhero" target="_new" style="color:#FBF9E4">NPM</a></p><p><a href="https://twitter.com/actionherojs" target="_new" style="color:#FBF9E4">Twitter</a></p><p><a href="https://slack.actionherojs.com/" target="_new" style="color:#FBF9E4">Slack</a></p><p><a href="https://github.com/Actionhero/Actionhero" target="_new" style="color:#FBF9E4">Github</a></p><p><a href="https://actionherojs.threadless.com" target="_new" style="color:#FBF9E4">Shop</a></p></div></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"## Overview\n\nUpgrading big Actionhero projects to a new major might require some effort. Every Actionhero version has it's own specific project files which you generate using `Actionhero generate` command.\n\nOne of the ways to upgrade your project is to generate a new project using the latest Actionhero framework (`npx Actionhero generate`). Using that as your starting point you can then carefully copy all your `configs`, `initializers`, `servers`, `tasks`, `actions`, and other custom code from your old project, making sure that you are at the same working state as before. It's a good practice to make tests for your actions (or any other component) before you plan to upgrade your Actionhero project.\n\nWith good [test coverage](tutorial-testing.html) you can make sure that you have successfully upgraded your project.\n\nActionhero follows [semantic versioning](http://semver.org/). This means that a minor change is a right-most number. A new feature added is the middle number, and a breaking change is the left number. You should expect something in your application to need to be changed if you upgrade a major version.\n\n## Upgrading from v22 to v23\n\nThis release is breaking for 2 reasons:\n\n1. The logger format for Action and Task errors has changed [Pull Request](https://github.com/actionhero/actionhero/pull/1505).\n2. The `Documentation` initializer and related `showDocumentation` action has been removed in favor of the new swagger action \u0026 middleware [Pull Request](https://github.com/actionhero/actionhero/pull/1474).\n\nIf you use automated log ingestion (i.e.: Splunk or a Winston logger) this PR should be helpful, as the error and stack trace will now all be on the same line... but you will need to update your log tools.\n\nIf you had been using the `Documentation` initializer, you can re-build it yourself from `api.actions.actions`. If you want upgrade your Actionhero project to use the new Swagger documentation tooling, you need to copy in 2 files:\n\n- The Swagger public page - [swagger.html](https://github.com/actionhero/actionhero/blob/master/public/swagger.html)\n- The Swagger Action - [swagger.ts](https://github.com/actionhero/actionhero/blob/master/src/actions/swagger.ts)\n\nThere are also new logging options to add to `src/config/api.ts`:\n\n- `config.general.enableResponseLogging` (bool) toggles this option on (off by default)\n- `config.general. filteredResponse` (string[]) allow you to filter out certain parts of the response payload from the logs, hiding sensitive data.\n\n## Upgrading from v21 to v22\n\nAssuming that you have already migrated your project to [Typescript](/tutorials/typescript), the only change is create your `server.ts` and change your `package.json` scripts to use it. Support for `boot.js` has also been removed, and you should move that logic into your new `server.ts`\n\n```ts\n// in ./src/server.ts\nimport { Process } from \"actionhero\";\n\n// load any custom code, configure the env, as needed\n\nasync function main() {\n  // create a new actionhero process\n  const app = new Process();\n\n  // handle unix signals and uncaught exceptions \u0026 rejections\n  app.registerProcessSignals();\n\n  // start the app!\n  // you can pass custom configuration to the process as needed\n  await app.start();\n}\n\nmain();\n```\n\nYour package json should now contain:\n\n```js\n  \"scripts\": {\n    \"postinstall\": \"npm run build\",\n    \"dev\": \"ts-node-dev --no-deps --transpile-only ./src/server.ts\",\n    \"start\": \"node ./dist/server.js\",\n    \"test\": \"jest\",\n    \"pretest\": \"npm run build \u0026\u0026 npm run lint\",\n    \"build\": \"tsc --declaration\",\n    \"lint\": \"prettier --check src/*/** __test__/*/**\",\n    \"pretty\": \"prettier --write src/*/** __test__/*/**\"\n  },\n```\n\nAlso be sure that your `packate.json` contains the `@types/ioreids` devDependency. You can install it with `npm install --save-dev @types/ioredis`\n\nTasks can now use [input validation](https://www.actionherojs.com/tutorials/tasks#Task%20Inputs).\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v22.0.0)**\n\n## Upgrading from v20 to v21\n\nThe recommended upgrade to v21 of Actionhero is to move your project to Typescript.\nDetailed notes can be found on the [Typescript Tutorial](/tutorials/typescript).\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v21.0.9)**\n\n## Upgrading from v19 to v20\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v20.0.0)**\n\nThe only change to take note of is that you must now ensure that the working directory (CWD/PWD) in use when you start your Actionhero project is the root. (where /config, /actions, etc) are visible.\n\n## Upgrading from v18 to v19\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v19.0.0)**\n\n**Configuration**\n\n- in `config/tasks.js` `add config.tasks.stuckWorkerTimeout = 3600000`. This will be a 1 hour timeout for stuck/crashed worker processes\n- in `config/servers/websocket.js` `add config.servers.websocket.client.cookieKey = config.servers.web.fingerprintOptions.cookieKey`. This will instruct the Actionhero Websocket Clients to share the same cookie as the web server to share a fingerprint, which can be used to share session information.\n- If you plan to use Jest for your tests, and want to test in parallel, you will need to configure your server in the test environment to make use of `process.env.JEST_WORKER_ID`. Please view [`config/api.js`](https://github.com/actionhero/actionhero/blob/master/config/api.js), [`config/redis.js`](https://github.com/actionhero/actionhero/blob/master/config/redis.js), [`config/servers/socket.js`](https://github.com/actionhero/actionhero/blob/master/config/servers/socket.js), and [`config/servers/web.js`](https://github.com/actionhero/actionhero/blob/master/config/servers/web.js) for more information\n\n## Upgrading from v19 to v20\n\n**Full Release Notes: [GitHub](https://github.com/actionhero/actionhero/releases/tag/v20.0.0)**\n\n- In `config/api.js` add `config.general.paths.test = [path.join(__dirname, '/../__tests__')]` so that when you generate a new action or task, the related test file can be generated as well.\n- However you run Actionhero, be sure to `cd` into the root directory of the project before starting the server.\n\n## Upgrading from v19 to v20\n\n**Full Release Notes: [GitHub](https://github.com/actionhero/actionhero/releases/tag/v19.0.0)**\n\n- in `config/tasks.js` `add config.tasks.stuckWorkerTimeout = 3600000`. This will be a 1 hour timeout for stuck/crashed worker processes\n- in `config/servers/websocket.js` `add config.servers.websocket.client.cookieKey = config.servers.web.fingerprintOptions.cookieKey`. This will instruct the Actionhero Websocket Clients to share the same cookie as the web server to share a fingerprint, which can be used to share session information.\n- If you plan to use Jest for your tests, and want to test in parallel, you will need to configure your server in the test environment to make use of `process.env.JEST_WORKER_ID`. Please view [`config/api.js`](https://github.com/actionhero/actionhero/blob/master/config/api.js), [`config/redis.js`](https://github.com/actionhero/actionhero/blob/master/config/redis.js), [`config/servers/socket.js`](https://github.com/actionhero/actionhero/blob/master/config/servers/socket.js), and [`config/servers/web.js`](https://github.com/actionhero/actionhero/blob/master/config/servers/web.js) for more information\n\n## Upgrading from v17 to v18\n\n**Full Release Notes: [GitHub](https://github.com/actionhero/actionhero/releases/tag/v18.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\nThere are _many_ changes to the APIs Actionhero exposes. You can read up on the new syntax on our [new documentation website, docs.actionherojs.com](https://docs.actionherojs.com)\n\n- **Node.js version**\n\n  - Node.js v8 and higher is now required. You must update your projects.\n\n- **Actions**\n  - Actions are now ES6 classes, which extend `require('Actionhero').Action`.\n  - The `run` method only has one argument now, `data` and becomes a `async` method. `api` can be required globally to your file.\n\n```js\nconst { Action, api } = require(\"actionhero\");\n\nmodule.exports = class MyAction extends Action {\n  constructor() {\n    super();\n    this.name = \"randomNumber\";\n    this.description = \"I am an API method which will generate a random number\";\n    this.outputExample = { randomNumber: 0.1234 };\n  }\n\n  async run(data) {\n    data.response.randomNumber = Math.random();\n  }\n};\n```\n\n- **Tasks**\n  - Tasks are now ES6 classes, which extend `require('Actionhero').Task`.\n  - The `run` method only has one argument now, `data` and becomes a `async` method. `api` can be required globally to your file.\n\n```js\nconst { api, Task } = require(\"actionhero\");\n\nmodule.exports = class SendWelcomeMessage extends Task {\n  constructor() {\n    super();\n    this.name = \"SendWelcomeEmail\";\n    this.description = \"I send the welcome email to new users\";\n    this.frequency = 0;\n    this.queue = \"high\";\n    this.middleware = [];\n  }\n\n  async run(data) {\n    await api.sendWelcomeEmail({ address: data.email });\n    return true;\n  }\n};\n```\n\n- **Initializers**\n  - Initializers are now ES6 classes, which extend `require('actionhero').Initializer`.\n  - The `initialize`, `start`, and `stop` methods now have no arguments and become a `async` methods. `api` can be required globally to your file.\n\n```js\nconst { Actionhero, api } = require(\"actionhero\");\n\nmodule.exports = class StuffInit extends Actionhero.Initializer {\n  constructor() {\n    super();\n    this.name = \"StuffInit\";\n    this.loadPriority = 1000;\n    this.startPriority = 1000;\n    this.stopPriority = 1000;\n  }\n\n  async initialize() {\n    api.StuffInit = {};\n    api.StuffInit.doAThing = async () =\u003e {};\n    api.StuffInit.stopStuff = async () =\u003e {};\n    api.log(\"I initialized\", \"debug\", this.name);\n  }\n\n  async start() {\n    await api.StuffInit.startStuff();\n    api.log(\"I started\", \"debug\", this.name);\n  }\n\n  async stop() {\n    await api.StuffInit.stopStuff();\n    api.log(\"I stopped\", \"debug\", this.name);\n  }\n};\n```\n\n- **Servers**\n  - Servers are now ES6 classes, which extend `require('Actionhero').Server`.\n  - The `initialize`, `start`, and `stop` methods now have no arguments and become a `async` methods. `api` can be required globally to your file.\n\n```js\nconst Actionhero = require(\"Actionhero\");\n\nmodule.exports = class MyServer extends Actionhero.Server {\n  constructor() {\n    super();\n    this.type = \"%%name%%\";\n\n    this.attributes = {\n      canChat: false,\n      logConnections: true,\n      logExits: true,\n      sendWelcomeMessage: false,\n      verbs: [],\n    };\n    // this.config will be set to equal config.servers[this.type]\n  }\n\n  initialize() {\n    this.on(\"connection\", (connection) =\u003e {});\n\n    this.on(\"actionComplete\", (data) =\u003e {});\n  }\n\n  start() {\n    // this.buildConnection (data)\n    // this.processAction (connection)\n    // this.processFile (connection)\n  }\n\n  stop() {}\n\n  sendMessage(connection, message, messageId) {}\n\n  sendFile(connection, error, fileStream, mime, length, lastModified) {}\n\n  goodbye(connection) {}\n};\n```\n\n- **CLI Commands**\n  - CLI Commands are now ES6 classes, which extend `require('Actionhero').CLI`.\n  - The `run` method now has one argument, `data` and becomes a `async` method. `api` can be required globally to your file.\n\n```js\nconst {api, CLI} = require('Actionhero')\n\nmodule.exports = class RedisKeys extends CLI {\n  constructor () {\n    super()\n    this.name = 'redis keys'\n    this.description = 'I list all the keys in redis'\n    this.example = 'Actionhero keys --prefix Actionhero'\n  }\n\n  inputs () {\n    return {\n      prefix: {\n        required: true,\n        default: 'Actionhero',\n        note: 'the redis prefix for searching keys'\n      }\n    }\n  }\n\n  async run ({params}) =\u003e {\n    let keys = await api.redis.clients.client.keys(params.prefix)\n    api.log('Found ' + keys.length + 'keys:')\n    keys.forEach((k) =\u003e { api.log(k) })\n  }\n}\n```\n\n- **Cache**\n\n  - All methods which used to return a callback are now `async` methods which, when `await`ed, return a result and `throw` errors\n\n- **Tasks**\n\n  - All methods which used to return a callback are now `async` methods which, when `await`ed, return a result and `throw` errors\n\n- **Chat**\n\n  - All methods which used to return a callback are now `async` methods which, when `await`ed, return a result and `throw` errors\n\n- **SpecHelper**\n  - All methods which used to return a callback are now `async` methods which, when `await`ed, return a result and `throw` errors\n\n```js\nconst chai = require(\"chai\");\nconst dirtyChai = require(\"dirty-chai\");\nconst expect = chai.expect;\nchai.use(dirtyChai);\n\nconst path = require(\"path\");\nconst Actionhero = require(\"Actionhero\");\nconst Actionhero = new Actionhero.Process();\nlet api;\n\ndescribe(\"Action: RandomNumber\", () =\u003e {\n  before(async () =\u003e {\n    api = await Actionhero.start();\n  });\n  after(async () =\u003e {\n    await Actionhero.stop();\n  });\n\n  let firstNumber = null;\n  it(\"generates random numbers\", async () =\u003e {\n    let { randomNumber } = await api.specHelper.runAction(\"randomNumber\");\n    expect(randomNumber).to.be.at.least(0);\n    expect(randomNumber).to.be.at.most(1);\n    firstNumber = randomNumber;\n  });\n\n  it(\"is unique / random\", async () =\u003e {\n    let { randomNumber } = await api.specHelper.runAction(\"randomNumber\");\n    expect(randomNumber).to.be.at.least(0);\n    expect(randomNumber).to.be.at.most(1);\n    expect(randomNumber).not.to.equal(firstNumber);\n  });\n});\n```\n\n- **Utils**\n\n  - `api.utils.recursiveDirectoryGlob` has been removed in favor of the [glob package](https://github.com/isaacs/node-glob). Use this instead.\n  - All methods which used to return a callback are now `async` methods which, when `await`ed, return a result and `throw` errors\n\n- **Plugins**\n\n  - Actionhero no longer uses linkfiles to find plugins. If you have any in a `plugins` directory in your actions, tasks, config, or public folders, delete them.\n  - Plugins now need to be defined explicitly in a new `./config/plugins.js` config file. You should create one [per the example](https://github.com/Actionhero/Actionhero/blob/master/config/plugins.js)\n  - Removed `Actionhero link` and `Actionhero unlink` per the above.\n  - Added `Actionhero generate plugin`, a helper which you can use in an empty directory which will create a template plugin project\n  - Testing plugins is now simpler. [Read more about this on docs.actionherojs.com](https://docs.actionherojs.com/tutorial-plugins.html)\n\n- **Clients**\n  - `ActionheroClient` (the included client library for browser websocket clients) as been named a more clear `ActionheroWebsocketClient` to avoid ambiguity.\n  - The node sever-sever package has been renamed `Actionhero-node-client` to help clear up any confusion.\n\n## Upgrading from v16 to v17\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v17.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n- **Localization (i18n)**\n\n- In `./config/i18n.js` be sure to enable `objectNotation`, or else the new locale file will be gibberish to Actionhero\n- As of this release, Actionhero no longer localizes its log messages. This is done to simplify and speed up the logger methods. There is not mitigation path here without overwriting the `api.log()` method.\n\n- Any use of `%` interpolation should be removed from your logger strings. Favor native JS string templates.\n\n- Actionhero now ships with locale files by default.\n\n- You will need to acquire the [default locale file](https://github.com/Actionhero/Actionhero/blob/master/locales/en.json) and copy it into `./locales/en.json` within your project.\n- The error reporters have all been changed to use these new locale file and mustache-style syntax. Update your from the [default errors file](https://github.com/Actionhero/Actionhero/blob/master/config/errors.js)\n- The `welcomeMessage` and `goodbyeMessage` are removed from the config files and Actionhero now references the locale files for these strings. Update yours accordingly.\n\n- **utils**\n\n- `api.utils.recursiveDirectoryGlob` has been removed in favor of the [glob package](https://github.com/isaacs/node-glob). Use this instead.\n\n## Upgrading from v15 to v16\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v16.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\nThe only breaking changes are related to the capilization of internal methods:\n\n- `api.Connection()` rather than `api.connection()`\n- `api.GenericServer()` rather than `api.genericServer()`\n- `api.ActionProcessor()` rather than `api.actionProcessor()`\n- `require('Actionhero')` not `require('Actionhero').actionheroPrototype` should you be using Actionhero programmatically.\n\n## Upgrading from v14 to v15\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v15.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n```bash\n\\`Actionhero generateAction --name=[name]\\`      -\u003e \\`Actionhero generate action --name=[name]\\`\n\\`Actionhero generateInitializer --name=[name]\\` -\u003e \\`Actionhero generate initializer --name=[name]\\`\n\\`Actionhero generateServer --name=[name]\\`      -\u003e \\`Actionhero generate server --name=[name]\\`\n\\`Actionhero generateTask --name=[name]\\`        -\u003e \\`Actionhero generate task --name=[name]\\`\n```\n\n- The Actionhero binary has had it's commands changed.\n  - Any deployment or automation tools you use will need to be updated accordingly.\n- Tasks now use middleware instead of plugins.\n  - You will need to convert all uses of task plugins to task middleware.\n\n## Upgrading from v13 to v14\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v14.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n- Redis Client Configurations have changed drastically. This allows for greater configuration, but at a complexity cost.\n  - The easiest way to upgrade your `config/redis.js` is to take if from the [master branch](https://github.com/Actionhero/Actionhero/blob/master/config/redis.js) directly and re-apply your configuration.\n  - Move `config.redis.channel` to `config.general.channel`\n  - Move `config.redis. rpcTimeout` to `config.general.rpcTimeout`\n  - Throughout the code, use `config.redis.client` rather than `api.redis.client`\n\n## Upgrading from v12 to v13\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v13.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n- Plugins\n  - `config/plugins.js` is removed. Delete yours.\n  - Use the new binary command, `Actionhero link --name=NameOfPlugin` to link your plugins in the new method.\n  - Linking plugins will likely create new config files you may need to customize.\n- Locales\n  - This release introduced Locales. You will need the new locale config file. The easiest way to upgrade your `config/i18n.js` is to take if from the [master branch](https://github.com/Actionhero/Actionhero/blob/master/config/i18n.js).\n  - Ensure that `config.i18n.updateFiles` is `true` so that your locale files can be generated for the first time.\n- Errors\n  - `config/errors.js` has been completely redone to take advantage of `connection.localize`. The easiest way to upgrade your `config/errors.js` is to take if from the [master branch](https://github.com/Actionhero/Actionhero/blob/master/config/errors.js).\n- Grunt Removed\n  - Grunt is removed from the project. The old Actionhero grunt commands have been moved into the Actionhero binary.\n- Redis configuration\n  - `package` is a reserved keyword in JavaScript. We now use the key `pkg` in the redis config.\n\n## Upgrading from v11 to v12\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v12.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n- Redis configuration\n  - Switch from using the `redis` npm package to `ioredis`. Change this in your package.json.\n- `ioredis` handles passwords slightly differently. Read the [ioredis](https://github.com/luin/ioredis) documentation to learn more.\n- Stats Removed\n  - The `api.stats` subsection has been removed from Actionhero\n  - If you need the stats subsection, you can get get it [via plugin](https://github.com/Actionhero/ah-stats-plugin)\n\n## Upgrading from v10 to v11\n\n**Full Release Notes: [GitHub](https://github.com/Actionhero/Actionhero/releases/tag/v11.0.0)**\n\n**Breaking Changes and How to Overcome Them:**\n\n- Action Syntax changed\n  - `run: function(api, data, next){ data.response.randomNumber = Math.random(); next(error); }`\n  - Where data contains:\n  - `data = { connection: connection, action: 'randomNumber', toProcess: true, toRender: true, messageId: 123, params: { action: 'randomNumber', apiVersion: 1 }, actionStartTime: 123, response: {}, }`\n  - You will need to change all of your actions to use `data.connection` rather than `connection` directly.\n  - You will need to change all of your actions to use `data.response` rather than `connection.response` directly.\n- Middleware syntax has changed to match action's `data` pattern. You will need to change your middleware accordingly.\n- Removed `connection._originalConnection`.\n- Websockets:\n  - The params of websocket connections should NOT be sticky. All actions will start with `connection.params = {}`. If you rely on the old behavior, you will need to change your client code.\n- Action Processor:\n  - Removed duplicate callback prevention in ActionProcessor. This belongs on the user/implementer to handle.\n","name":"upgrade-path"}},"page":"/tutorials/[name]","query":{"name":"upgrade-path"},"buildId":"Bi8zX94g88TeljxT54m8H","nextExport":true,"isFallback":false,"gip":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-a2ec81a3b359d83082c2.js"></script><script src="/_next/static/chunks/main-34725f5a99cb2b2b6f00.js" async=""></script><script src="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" async=""></script><script src="/_next/static/chunks/commons.94d1ccb9dee116719961.js" async=""></script><script src="/_next/static/chunks/pages/_app-7d0481f4467570ea8ca6.js" async=""></script><script src="/_next/static/chunks/dd05285286c593a0e6da2f584467d9517f5816b2.be19a4f843a12596b98d.js" async=""></script><script src="/_next/static/chunks/27270cb085e17e8e99404fc0284c05b5fb1bb558.1923d1b6e48e3134e628.js" async=""></script><script src="/_next/static/chunks/e75431a1bdcb89b14e100a4a4bb0858c3732af66.b4fa2937edb4092f8c40.js" async=""></script><script src="/_next/static/chunks/pages/tutorials/%5Bname%5D-e4f5bf03c6c5960f3180.js" async=""></script><script src="/_next/static/Bi8zX94g88TeljxT54m8H/_buildManifest.js" async=""></script><script src="/_next/static/Bi8zX94g88TeljxT54m8H/_ssgManifest.js" async=""></script></body></html>